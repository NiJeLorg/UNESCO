function createFCEMap(){d3.csv("./data/FCE-data.csv",function(e){var t=d3.select("#FCEMap").append("svg").attr("class","svg-loading").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),o=d3.scale.threshold();o.domain([0,7,10,13]),o.range(["#fff","#ef4136","#f7941e","#73cfc9","#3b6a8f"]),d3.json("./data/world-countries.json",function(a){for(var r=0;r<e.length;r++){var i=e[r].Code;if("a"==e[r].Duration_compulsory_education&&"m"==e[r].Duration_compulsory_education||isNaN(e[r].Duration_compulsory_education))var n=-99;else var n=parseFloat(e[r].Duration_compulsory_education);if("a"==e[r].Duration_free_education&&"m"==e[r].Duration_free_education||isNaN(e[r].Duration_free_education))var l=-99;else var l=parseFloat(e[r].Duration_free_education);for(var s=0;s<a.features.length;s++){var d=a.features[s].properties.adm0_a3;if(i==d){a.features[s].properties.Duration_compulsory_education=n,a.features[s].properties.Duration_free_education=l;break}}}var c=t.selectAll(".countryPaths").data(a.features),p=c.enter().append("g").attr("class","countryPaths");p.append("path").attr("d",path).style("stroke","#4d4d4d").style("stroke-width","1px").style("fill",function(e){var t=e.properties.Duration_compulsory_education;return"undefined"!=typeof t?o(t):"#fff"}).on("mouseover",function(e){if(c.selectAll("path").transition().duration(250).style("stroke-width",function(t){return t==e?"2px":"0px"}).style("fill-opacity",function(t){return t==e?"1":"0.5"}),d3.event.pageX>=w/2)var t=divTooltipRight,o=-150;else var t=divTooltipLeft,o=25;if(t.transition().duration(250).style("opacity",1),"undefined"!=typeof e.properties.Duration_compulsory_education&&-99!=e.properties.Duration_compulsory_education)if("en"==lang)var a="Compulsory education: "+e.properties.Duration_compulsory_education+" years.";else if("fr"==lang)var a="Scolarité obligatoire: "+e.properties.Duration_compulsory_education+" ans.";else var a="Educación obligatoria: "+e.properties.Duration_compulsory_education+" años.";else if("en"==lang)var a="No data.";else if("fr"==lang)var a="Aucune donnée.";else var a="Sin datos.";if("en"==lang)var r=e.properties.name_en;else if("fr"==lang)var r=e.properties.name_fr;else var r=e.properties.name_sp;t.html('<p class="tooltip-title">'+r+'</p><p class="tooltip-text">'+a+"</p>").style("left",d3.event.pageX+o+"px").style("top",d3.event.pageY-55+"px")}).on("mousemove",function(e){if(d3.event.pageX>=w/2)var t=divTooltipRight,o=-150;else var t=divTooltipLeft,o=25;t.style("left",d3.event.pageX+o+"px").style("top",d3.event.pageY-55+"px")}).on("mouseout",function(){c.selectAll("path").transition().duration(250).style("stroke-width","1px").style("fill-opacity",1),divTooltipLeft.transition().duration(250).style("opacity",1e-6),divTooltipRight.transition().duration(250).style("opacity",1e-6)})})})}function createOOSCRatesMap(){d3.json("./data/world-countries.json",function(e){geojson=e;for(var t=0;t<apidata.Indicators.length;t++)for(var o=apidata.Indicators[t].Country,a=parseFloat(apidata.Indicators[t].Value),r=0;r<geojson.features.length;r++){var i=geojson.features[r].properties.adm0_a3;if(o==i){"ROFST_1_CP"==apidata.Indicators[t].Indicator?(geojson.features[r].properties.rate_ROFST_1_CP_Value=a,geojson.features[r].properties.rate_ROFST_1_CP_Year=apidata.Indicators[t].Year):"ROFST_2_CP"==apidata.Indicators[t].Indicator?(geojson.features[r].properties.rate_ROFST_2_CP_Value=a,geojson.features[r].properties.rate_ROFST_2_CP_Year=apidata.Indicators[t].Year):"OFST_1_F_CP"==apidata.Indicators[t].Indicator?geojson.features[r].properties.OFST_1_F_CP_Value=a:"OFST_1_M_CP"==apidata.Indicators[t].Indicator?geojson.features[r].properties.OFST_1_M_CP_Value=a:"OFST_2_F_CP"==apidata.Indicators[t].Indicator?geojson.features[r].properties.OFST_2_F_CP_Value=a:geojson.features[r].properties.OFST_2_M_CP_Value=a;break}}activeLayer="ROFST_1_CP",drawOOSCMap()})}function drawOOSCMap(){paths=svg2.selectAll(".countryPaths").data(geojson.features);var e=paths.enter().append("g").attr("class","countryPaths");e.append("path").attr("d",path).style("stroke","#4d4d4d").style("stroke-width","1px").on("mousemove",function(e){if(d3.event.pageX>=w/2)var t=divTooltipRight,o=-150;else var t=divTooltipLeft,o=25;t.style("left",d3.event.pageX+o+"px").style("top",d3.event.pageY-55+"px")}).on("mouseout",function(){paths.selectAll("path").transition().duration(250).style("stroke-width","1px").style("fill-opacity",1),divTooltipLeft.transition().duration(250).style("opacity",1e-6),divTooltipRight.transition().duration(250).style("opacity",1e-6)}),e.call(updateOOSCMap),paths.exit().remove()}function updateOOSCMap(){paths.select("path").style("fill",function(e){if("ROFST_1_CP"==activeLayer){var t=e.properties.rate_ROFST_1_CP_Value;return t?color_ROFST_1_CP(t):"#ffffff"}var t=e.properties.rate_ROFST_2_CP_Value;return t?color_ROFST_2_CP(t):"#ffffff"}).on("mouseover",function(e){if(paths.selectAll("path").transition().duration(250).style("stroke-width",function(t){return t==e?"2px":"0px"}).style("fill-opacity",function(t){return t==e?"1":"0.5"}),d3.event.pageX>=w/2)var t=divTooltipRight,o=-150;else var t=divTooltipLeft,o=25;if(t.transition().duration(250).style("opacity",1),"en"==lang)var a="Male: ",r="Female: ",i="No data.",n=" thousand",l=" million";else if("fr"==lang)var a="Garçons: ",r="Filles: ",i="Aucune donnée.",n=" milliers",l=" millions";else var a="Hombres: ",r="Mujeres: ",i="Sin datos.",n=" miles",l=" millónes";if("ROFST_1_CP"==activeLayer)if(e.properties.rate_ROFST_1_CP_Value)if(e.properties.OFST_1_F_CP_Value&&e.properties.OFST_1_M_CP_Value){var s=d3.formatPrefix(e.properties.OFST_1_F_CP_Value),d=s.scale(e.properties.OFST_1_F_CP_Value).toFixed(1);if("k"==s.symbol)var c=n;else if("M"==s.symbol)var c=l;else var c="";var p=r+d+c,u=d3.formatPrefix(e.properties.OFST_1_M_CP_Value),f=u.scale(e.properties.OFST_1_M_CP_Value).toFixed(1);if("k"==u.symbol)var _=n;else if("M"==u.symbol)var _=l;else var _="";var m=a+f+_,v=" ("+e.properties.rate_ROFST_1_CP_Year+")"}else var p=i,m="",v="";else var p=i,m="",v="";else if(e.properties.rate_ROFST_2_CP_Value)if(e.properties.OFST_2_F_CP_Value&&e.properties.OFST_2_M_CP_Value){var s=d3.formatPrefix(e.properties.OFST_2_F_CP_Value),d=s.scale(e.properties.OFST_2_F_CP_Value).toFixed(1);if("k"==s.symbol)var c=n;else if("M"==s.symbol)var c=l;else var c="";var p=r+d+c,u=d3.formatPrefix(e.properties.OFST_2_M_CP_Value),f=u.scale(e.properties.OFST_2_M_CP_Value).toFixed(1);if("k"==u.symbol)var _=n;else if("M"==u.symbol)var _=l;else var _="";var m=a+f+_,v=" ("+e.properties.rate_ROFST_2_CP_Year+")"}else var p=i,m="",v="";else var p=i,m="",v="";if("en"==lang)var g=e.properties.name_en;else if("fr"==lang)var g=e.properties.name_fr;else var g=e.properties.name_sp;t.html('<p class="tooltip-title">'+g+v+'</p><p class="tooltip-text">'+p+'</p><p class="tooltip-text">'+m+"</p>").style("left",d3.event.pageX+o+"px").style("top",d3.event.pageY-55+"px")})}function createEducationAidFlowMap(){var e;clicked=!1;var t=d3.select("#EducationAidFlowMap").append("svg").attr("class","svg-loading").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),o=d3.format(",.6"),a=d3.scale.threshold();a.domain([9.9,19.9,29.9,100]),a.range(["#bdc9e1","#67a9cf","#1c9099","#016c59"]);var r=d3.scale.threshold();r.domain([9.9,19.9,29.9,100]),r.range(["#fee5d9","#fcae91","#fb6a4a","#de2d26"]);t.append("rect").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom).attr("x",0).attr("y",0).style("fill","#fff").style("stroke","#fff").style("stroke-width",0).on("click",function(){clicked=!1,centroids.selectAll("circle").transition().duration(50).attr("display","none"),centroids.selectAll(".countryNameEn").transition().duration(50).attr("display","none"),centroids.selectAll(".countryNameFr").transition().duration(50).attr("display","none"),centroids.selectAll(".countryNameEs").transition().duration(50).attr("display","none"),centroids.selectAll(".bubbleTextEn").transition().duration(50).attr("display","none"),centroids.selectAll(".bubbleTextFr").transition().duration(50).attr("display","none"),centroids.selectAll(".bubbleTextEs").transition().duration(50).attr("display","none"),arcs.selectAll("path").transition().duration(0).attr("fill","#111").attr("fill-opacity",.75).attr("stroke-opacity",.75).attr("stroke","#111").attr("display","none"),countries.selectAll("path").transition().duration(50).style("stroke-width","1px").style("fill-opacity",1)});countries=t.append("g").attr("id","countries"),arcs=t.append("g").attr("id","arcs"),centroids=t.append("g").attr("id","centroids"),d3.loadData=function(){var e=null,t={},o={},a=function(e,a){return delete t[e],o[e]=a,r()},r=function(){null!=e&&0===d3.keys(t).length&&e(o)},i={json:function(e,o){return t[e]=o,d3.json(o,function(t){return a(e,t)}),i},csv:function(e,o){return t[e]=o,d3.csv(o,function(t){return a(e,t)}),i},onload:function(t){e=t,r()}};return i},d3.loadData().json("countries","./data/world-countries.json").csv("nodes","./data/OECD_Nodes.csv").csv("flows","./data/OECD_Edges.csv").onload(function(t){function i(e){var t=parseFloat(e.Lon),o=parseFloat(e.Lat);return isNaN(t)||isNaN(o)?null:[t,o]}function n(t){clearTimeout(j),divOnboarding.transition().duration(50).style("opacity",1e-6),divTooltipLeft.transition().duration(50).style("opacity",1e-6),divTooltipRight.transition().duration(50).style("opacity",1e-6),e=t,centroids.selectAll("circle").transition().duration(50).attr("display",function(e){return e.OECD_Country_Code==t.properties.adm0_a3?(clicked=!0,"block"):"none"}),"en"==lang?centroids.selectAll(".countryNameEn").transition().duration(50).attr("display",function(e){return e.OECD_Country_Code==t.properties.adm0_a3?"block":"none"}):"fr"==lang?centroids.selectAll(".countryNameFr").transition().duration(50).attr("display",function(e){return e.OECD_Country_Code==t.properties.adm0_a3?"block":"none"}):centroids.selectAll(".countryNameEs").transition().duration(50).attr("display",function(e){return e.OECD_Country_Code==t.properties.adm0_a3?"block":"none"}),"en"==lang?centroids.selectAll(".bubbleTextEn").transition().duration(50).attr("display",function(e){return e.OECD_Country_Code==t.properties.adm0_a3?"block":"none"}):"fr"==lang?centroids.selectAll(".bubbleTextFr").transition().duration(50).attr("display",function(e){return e.OECD_Country_Code==t.properties.adm0_a3?"block":"none"}):centroids.selectAll(".bubbleTextEs").transition().duration(50).attr("display",function(e){return e.OECD_Country_Code==t.properties.adm0_a3?"block":"none"}),arcs.selectAll("path").transition().duration(0).attr("fill-opacity",.75).attr("stroke-opacity",.75).attr("fill",function(e){return"Donor"==t.properties.Donor_or_Recipient?e.origin.OECD_Country_Code==t.properties.adm0_a3?"#44509d":"#111":e.dest.OECD_Country_Code==t.properties.adm0_a3?"#f36d42":"#111"}).attr("stroke",function(e){return"Donor"==t.properties.Donor_or_Recipient?e.origin.OECD_Country_Code==t.properties.adm0_a3?"#44509d":"#111":e.dest.OECD_Country_Code==t.properties.adm0_a3?"#f36d42":"#111"}).attr("display",function(e){return"Donor"==t.properties.Donor_or_Recipient?e.origin.OECD_Country_Code==t.properties.adm0_a3?"block":"none":e.dest.OECD_Country_Code==t.properties.adm0_a3?"block":"none"}),countries.selectAll("path").transition().duration(50).style("stroke-width",function(e){return"Donor"==t.properties.Donor_or_Recipient?0==t.properties.Donates_To.length?"1px":-1!=$.inArray(e.properties.adm0_a3,t.properties.Donates_To)?"2px":"0px":0==t.properties.Receives_From.length?"1px":-1!=$.inArray(e.properties.adm0_a3,t.properties.Receives_From)?"2px":"0px"}).style("fill-opacity",function(e){return"Donor"==t.properties.Donor_or_Recipient?0==t.properties.Donates_To.length?"1":-1!=$.inArray(e.properties.adm0_a3,t.properties.Donates_To)?"1":"0.5":0==t.properties.Receives_From.length?"1":-1!=$.inArray(e.properties.adm0_a3,t.properties.Receives_From)?"1":"0.5"})}function l(e,t,o){var a=projection(e.source),r=projection(e.target),i=o;if(arrowOffset=i,t){var a=projection(e.target),r=projection(e.source);arrowOffset=-arrowOffset}dx=r[0]-a[0],dy=r[1]-a[1],cx=(a[0]+r[0])/2,cy=(a[1]+r[1])/2,ra=Math.sqrt(dx*dx+dy*dy),er=ra/Math.abs(dx/h)*1.3;var n=dx<0?" 0 0,0 ":" 1 0,1 ";dx<0?" 1 0,1 ":" 0 0,0 ","M "+a[0]+","+a[1]+" A "+er+","+er+n+r[0]+","+r[1];return cx=(a[0]+r[0])/2,cy=(a[1]+r[1])/2,lineangle=Math.atan(dy/dx),erangle=Math.asin(ra/2/er),rc=Math.tan(erangle)*(ra/2),cpx=Math.cos(lineangle-Math.PI/2)*rc,cpy=Math.sin(lineangle-Math.PI/2)*rc,ctrx=cpx+cx,ctry=cpy+cy,trgangle=Math.atan((ctrx-r[0])/(ctry-r[1])),angle=Math.PI/2,r[0]-a[0]<0&&(angle=-Math.PI/2,trgangle<0&&(arrowOffset=-arrowOffset)),r[0]-a[0]>0&&trgangle>0&&(arrowOffset=-arrowOffset),dTrgX=r[0]+Math.sin(trgangle)*arrowOffset,dTrgY=r[1]+Math.cos(trgangle)*arrowOffset,TinX=dTrgX+Math.sin(trgangle+angle)*i,TinY=dTrgY+Math.cos(trgangle+angle)*i,ToutX=dTrgX+Math.sin(trgangle-angle)*i,ToutY=dTrgY+Math.cos(trgangle-angle)*i,curveOut="M"+TinX+","+TinY+" Q"+ctrx+","+ctry+" "+a[0]+","+a[1],curveIn=" Q"+ctrx+","+ctry+" "+ToutX+","+ToutY,arrowHead=" L"+r[0]+","+r[1]+" "+TinX+","+TinY,finalArrow=curveOut+curveIn+arrowHead,finalArrow}var s={},d=[],c=d3.max(t.flows,function(e){return e.Total=e.Total.replace(/,/g,""),parseFloat(e.Total)}),p=d3.scale.linear().domain([1,c]).range([1,20]);t.nodes.forEach(function(e){e.Multilateral2&&"a"!=e.Multilateral2?(e.Multilateral2=e.Multilateral2.replace(/,/g,""),e.Multilateral2=parseFloat(e.Multilateral2)):e.Multilateral2=-99,e.coords=i(e),e.projection=e.coords?projection(e.coords):void 0,e.TotalContributedToCountries=0,e.TotalReceivedFromCountries=0;for(var o=0;o<t.flows.length;o++)if("Donor"==e.Donor_or_Recipient){if(e.OECD_Country_Code==t.flows[o].ISO_Source_Code){var a=t.flows[o].Total.replace(/,/g,"");a=parseFloat(a),isNaN(a)||(e.TotalContributedToCountries=e.TotalContributedToCountries+a)}}else if(e.OECD_Country_Code==t.flows[o].ISO_Target_Code){var a=t.flows[o].Total.replace(/,/g,"");a=parseFloat(a),isNaN(a)||(e.TotalReceivedFromCountries=e.TotalReceivedFromCountries+a)}s[e.Country_Code]=e}),t.flows.forEach(function(e){var t=s[e.UIS_Source_Code],o=t.coords,a=t.projection,r=s[e.UIS_Target_Code],i=r.coords,n=r.projection;e.Total=e.Total.replace(/,/g,"");var l=parseFloat(e.Total);o&&i&&!isNaN(l)&&d.push({source:o,target:i,magnitude:l,origin:t,dest:r,originp:a,destp:n})}),t.countries.features.forEach(function(e){for(var o=0;o<t.nodes.length;o++)if(e.properties.adm0_a3==t.nodes[o].OECD_Country_Code){e.properties.Donor_or_Recipient=t.nodes[o].Donor_or_Recipient,e.properties.multilateral=t.nodes[o].Multilateral2;break}e.properties.Donates_To=[],e.properties.Total_Donated=0,e.properties.Receives_From=[],e.properties.Total_Received=0;for(var o=0;o<t.flows.length;o++)"Donor"==e.properties.Donor_or_Recipient?e.properties.adm0_a3==t.flows[o].ISO_Source_Code&&(e.properties.Donates_To.push(t.flows[o].ISO_Target_Code),e.properties.Total_Donated=e.properties.Total_Donated+parseFloat(t.flows[o].Total)):e.properties.adm0_a3==t.flows[o].ISO_Target_Code&&(e.properties.Receives_From.push(t.flows[o].ISO_Source_Code),e.properties.Total_Received=e.properties.Total_Received+parseFloat(t.flows[o].Total));for(var o=0;o<apidata.Indicators.length;o++){var a=apidata.Indicators[o].Country,r=parseFloat(apidata.Indicators[o].Value),i=e.properties.adm0_a3;a==i&&("ROFST_1_CP"==apidata.Indicators[o].Indicator?(e.properties.rate_ROFST_1_CP_Value=r,e.properties.rate_ROFST_1_CP_Year=apidata.Indicators[o].Year):"ROFST_2_CP"==apidata.Indicators[o].Indicator?(e.properties.rate_ROFST_2_CP_Value=r,e.properties.rate_ROFST_2_CP_Year=apidata.Indicators[o].Year):"OFST_1_F_CP"==apidata.Indicators[o].Indicator?e.properties.OFST_1_F_CP_Value=r:"OFST_1_M_CP"==apidata.Indicators[o].Indicator?e.properties.OFST_1_M_CP_Value=r:"OFST_2_F_CP"==apidata.Indicators[o].Indicator?e.properties.OFST_2_F_CP_Value=r:e.properties.OFST_2_M_CP_Value=r)}}),countries.selectAll("path").data(t.countries.features).enter().append("path").attr("d",path).style("stroke","#4d4d4d").style("stroke-width","1px").style("fill",function(e){if("Donor"==e.properties.Donor_or_Recipient){var t=e.properties.rate_ROFST_1_CP_Value;return t?a(t):"#ffffff"}var t=e.properties.rate_ROFST_1_CP_Value;return t?r(t):"#ffffff"}).on("click",n).on("mouseover",function(e){if(!clicked){if(countries.selectAll("path").transition().duration(250).style("stroke-width",function(t){return t==e?"2px":"0px"}).style("fill-opacity",function(t){return t==e?"1":"0.5"}),d3.event.pageX>=w/2)var t=divTooltipRight,a=-150;else var t=divTooltipLeft,a=25;if(t.transition().duration(250).style("opacity",1),"en"==lang)var r="Aid to Education: ",i="$",n="",l="Bilateral: ",s="Multilateral: ",d=" million",c=" billion";else if("fr"==lang)var r="Aid to Education: ",i="",n=" USD",l="Bilatéral: ",s="Multilatéral: ",d=" million",c=" milliard";else var r="Aid to Education: ",i="",n=" USD",l="Bilateral: ",s="Multilateral: ",d=" millón",c=" billón";if(e.properties.Total_Donated>0){var p=d3.formatPrefix(e.properties.Total_Donated);if("k"==p.symbol)var u="",f=o(e.properties.Total_Donated);else if("M"==p.symbol)var u=d,f=p.scale(e.properties.Total_Donated).toFixed(1);else if("G"==p.symbol)var u=c,f=p.scale(e.properties.Total_Donated).toFixed(1);else var u="",f=o(p.scale(e.properties.Total_Donated));var _=r+i+f+u+n}else{var p=d3.formatPrefix(e.properties.Total_Received);if("k"==p.symbol)var u="",f=o(e.properties.Total_Received);else if("M"==p.symbol)var u=d,f=p.scale(e.properties.Total_Received).toFixed(1);else if("G"==p.symbol)var u=c,f=p.scale(e.properties.Total_Received).toFixed(1);else var u="",f=o(p.scale(e.properties.Total_Received));if(isNaN(e.properties.multilateral))var m="",v="0";else{var g=d3.formatPrefix(e.properties.multilateral);if("k"==g.symbol)var m="",v=o(e.properties.multilateral);else if("M"==g.symbol)var m=d,v=g.scale(e.properties.multilateral).toFixed(1);else if("G"==g.symbol)var m=c,v=g.scale(e.properties.multilateral).toFixed(1);else var m="",v=o(e.properties.multilateral)}var _=l+i+f+u+n+"<br />"+s+i+v+m+n}if("en"==lang)var y=e.properties.name_en;else if("fr"==lang)var y=e.properties.name_fr;else var y=e.properties.name_sp;if("en"==lang)var h="Click on this country to see the flow of education aid.";else if("fr"==lang)var h="Cliquez sur un pays pour voir le montant d'aide à l'éducation de base versé ou reçu. ";else var h="Haga click en cualquier país para visualizar el monto de la ayuda aportada o recibida.";t.html('<p class="tooltip-title">'+y+'</p><p class="tooltip-text">'+_+'</p><p class="tooltip-text">'+h+"</p>").style("left",d3.event.pageX+a+"px").style("top",d3.event.pageY-55+"px")}}).on("mousemove",function(e){if(!clicked){if(d3.event.pageX>=w/2)var t=divTooltipRight,o=-150;else var t=divTooltipLeft,o=25;t.style("left",d3.event.pageX+o+"px").style("top",d3.event.pageY-55+"px")}}).on("mouseout",function(){clicked||(countries.selectAll("path").transition().duration(250).style("stroke-width","1px").style("fill-opacity",1),divTooltipLeft.transition().duration(250).style("opacity",1e-6),divTooltipRight.transition().duration(250).style("opacity",1e-6))});var u=arcs.selectAll("path").data(d).enter().append("path").attr("display","none").attr("fill-opacity",.75).attr("stroke-opacity",.75).attr("stroke","#111").attr("stroke-width","2px").attr("fill","#111").attr("d",function(e){var t=p(e.magnitude),o=!1;return l(e,o,t)}).sort(function(e,t){var e=e.magnitude,t=t.magnitude;return isNaN(e)?isNaN(t)?0:-1:isNaN(t)?1:d3.ascending(e,t)});u.on("mouseover",function(t){if(arcs.selectAll("path").transition().duration(50).attr("fill-opacity",function(e){return e==t?1:.1}).attr("stroke-opacity",function(e){return e==t?1:.1}).attr("fill",function(o){return o==t?"Donor"==e.properties.Donor_or_Recipient?"#44509d":"#f36d42":"#ccc"}).attr("stroke",function(o){return o==t?"Donor"==e.properties.Donor_or_Recipient?"#44509d":"#f36d42":"#ccc"}),divOnboarding.transition().duration(50).style("opacity",1e-6),d3.event.pageX>=w/2)var a=divTooltipRight,r=-150;else var a=divTooltipLeft,r=25;if(a.transition().duration(50).style("opacity",1),"en"==lang)var i="$",n="",l=' <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> ',s=" million",d=" billion";else if("fr"==lang)var i="",n=" USD",l=' <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> ',s=" million",d=" milliard";else var i="",n=" USD",l=' <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> ',s=" millónes",d=" billón";var c=d3.formatPrefix(t.magnitude);if("k"==c.symbol)var p="",u=o(t.magnitude);else if("M"==c.symbol)var p=s,u=c.scale(t.magnitude).toFixed(1);else if("G"==c.symbol)var p=d,u=c.scale(t.magnitude).toFixed(1);else var p="",u=o(c.scale(t.magnitude));var f=d3.formatPrefix(t.dest.Multilateral2);if("k"==f.symbol){o(t.dest.Multilateral2)}else if("M"==f.symbol){f.scale(t.dest.Multilateral2).toFixed(1)}else if("G"==f.symbol){f.scale(t.dest.Multilateral2).toFixed(1)}else{o(t.dest.Multilateral2)}"en"==lang?(t.origin.Name_of_Country=t.origin.Name_of_Country,t.dest.Name_of_Country=t.dest.Name_of_Country):"fr"==lang?(t.origin.Name_of_Country=t.origin.Name_of_Country_fr,t.dest.Name_of_Country=t.dest.Name_of_Country_fr):(t.origin.Name_of_Country=t.origin.Name_of_Country_es,t.dest.Name_of_Country=t.dest.Name_of_Country_es);var _=t.origin.Name_of_Country+l+t.dest.Name_of_Country+": "+i+u+p+n+".";a.html('<p class="tooltip-title">'+t.dest.Name_of_Country+'</p><p class="tooltip-text">'+_+"</p>").style("left",d3.event.pageX+r+"px").style("top",d3.event.pageY-55+"px")}),u.on("mousemove",function(e){if(d3.event.pageX>=w/2)var t=divTooltipRight,o=-150;else var t=divTooltipLeft,o=25;t.style("left",d3.event.pageX+o+"px").style("top",d3.event.pageY-55+"px")}),u.on("mouseout",function(t){arcs.selectAll("path").transition().duration(50).attr("fill-opacity",.75).attr("stroke-opacity",.75).attr("fill",function(){return"Donor"==e.properties.Donor_or_Recipient?"#44509d":"#f36d42"}).attr("stroke",function(){return"Donor"==e.properties.Donor_or_Recipient?"#44509d":"#f36d42"}),divTooltipLeft.transition().duration(250).style("opacity",1e-6),divTooltipRight.transition().duration(250).style("opacity",1e-6)}),centroids.selectAll("circle").data(t.nodes.filter(function(e){return e.projection?!0:!1})).enter().append("circle").attr("cx",function(e){return e.projection[0]}).attr("cy",function(e){return e.projection[1]}).attr("r",68).attr("fill","#fff").attr("stroke","#4d4d4d").attr("stroke-width",3).attr("display","none");var f=centroids.selectAll(".countryNameEn").data(t.nodes.filter(function(e){return e.projection?!0:!1})).enter().append("text").attr("class","countryNameEn").attr("font-size","12px").attr("font-weight",600).attr("text-anchor","middle").attr("display","none");f.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.Name_of_Country.length>17?e.projection[1]-22:e.projection[1]-10}).text(function(e){if(e.Name_of_Country.length>17){var t=e.Name_of_Country.split(" ",1);return t[0]}return e.Name_of_Country}),f.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.Name_of_Country.length>17?e.projection[1]-8:e.projection[1]}).text(function(e){if(e.Name_of_Country.length>17){var t=e.Name_of_Country.split(" ");return t.splice(0,1),t.join(" ")}return""});var _=centroids.selectAll(".countryNameFr").data(t.nodes.filter(function(e){return e.projection?!0:!1})).enter().append("text").attr("class","countryNameFr").attr("font-size","12px").attr("font-weight",600).attr("text-anchor","middle").attr("display","none");_.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.Name_of_Country_fr.length>17?e.projection[1]-22:e.projection[1]-10}).text(function(e){if(e.Name_of_Country_fr.length>17){var t=e.Name_of_Country_fr.split(" ",1);return t[0]}return e.Name_of_Country_fr}),_.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.Name_of_Country_fr.length>17?e.projection[1]-8:e.projection[1]}).text(function(e){if(e.Name_of_Country_fr.length>17){var t=e.Name_of_Country_fr.split(" ");return t.splice(0,1),t.join(" ")}return""});var m=centroids.selectAll(".countryNameEs").data(t.nodes.filter(function(e){return e.projection?!0:!1})).enter().append("text").attr("class","countryNameEs").attr("font-size","12px").attr("font-weight",600).attr("text-anchor","middle").attr("display","none");m.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.Name_of_Country_es.length>17?e.projection[1]-22:e.projection[1]-10}).text(function(e){if(e.Name_of_Country_es.length>17){var t=e.Name_of_Country_es.split(" ",1);return t[0]}return e.Name_of_Country_es}),m.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.Name_of_Country_fr.length>17?e.projection[1]-8:e.projection[1]}).text(function(e){if(e.Name_of_Country_es.length>17){var t=e.Name_of_Country_es.split(" ");return t.splice(0,1),t.join(" ")}return""});var v="Aid to Education: ",g="$",y="",C="Bilateral: ",T="Multilateral:",x=" million",b=" billion",F=centroids.selectAll(".bubbleTextEn").data(t.nodes.filter(function(e){return e.projection?!0:!1})).enter().append("text").attr("class","bubbleTextEn").attr("font-size","10px").attr("text-anchor","middle").attr("display","none");F.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+4}).text(function(e){if("Donor"==e.Donor_or_Recipient)return v;var t=d3.formatPrefix(e.TotalReceivedFromCountries);if("k"==t.symbol)var a="",r=o(e.TotalReceivedFromCountries);else if("M"==t.symbol)var a=x,r=t.scale(e.TotalReceivedFromCountries).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.TotalReceivedFromCountries).toFixed(1);else var a="",r=o(t.scale(e.TotalReceivedFromCountries));return C+g+r+a+y}),F.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+16}).text(function(e){if("Donor"==e.Donor_or_Recipient){var t=d3.formatPrefix(e.TotalContributedToCountries);if("k"==t.symbol)var a="",r=o(e.TotalContributedToCountries);else if("M"==t.symbol)var a=x,r=t.scale(e.TotalContributedToCountries).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.TotalContributedToCountries).toFixed(1);else var a="",r=o(t.scale(e.TotalContributedToCountries));return g+r+a+y}}),F.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+16}).text(function(e){return"Recipient"==e.Donor_or_Recipient?T:void 0}),F.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+28}).text(function(e){if("Recipient"==e.Donor_or_Recipient){var t=d3.formatPrefix(e.Multilateral2);if("k"==t.symbol)var a="",r=o(e.Multilateral2);else if("M"==t.symbol)var a=x,r=t.scale(e.Multilateral2).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.Multilateral2).toFixed(1);else var a="",r=o(e.Multilateral2);return g+r+a+y}});var v="Aide à l’éducation de base:",g="",y=" USD",C="Bilatéral: ",T="Multilatéral:",x=" millions",b=" milliard",O=centroids.selectAll(".bubbleTextFr").data(t.nodes.filter(function(e){return e.projection?!0:!1})).enter().append("text").attr("class","bubbleTextFr").attr("font-size","10px").attr("text-anchor","middle").attr("display","none");O.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+4}).text(function(e){if("Donor"==e.Donor_or_Recipient)return v;var t=d3.formatPrefix(e.TotalReceivedFromCountries);if("k"==t.symbol)var a="",r=o(e.TotalReceivedFromCountries);else if("M"==t.symbol)var a=x,r=t.scale(e.TotalReceivedFromCountries).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.TotalReceivedFromCountries).toFixed(1);else var a="",r=o(t.scale(e.TotalReceivedFromCountries));return C+g+r+a+y}),O.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+16}).text(function(e){if("Donor"==e.Donor_or_Recipient){var t=d3.formatPrefix(e.TotalContributedToCountries);if("k"==t.symbol)var a="",r=o(e.TotalContributedToCountries);else if("M"==t.symbol)var a=x,r=t.scale(e.TotalContributedToCountries).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.TotalContributedToCountries).toFixed(1);else var a="",r=o(t.scale(e.TotalContributedToCountries));return g+r+a+y}}),O.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+16}).text(function(e){return"Recipient"==e.Donor_or_Recipient?T:void 0}),O.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+28}).text(function(e){if("Recipient"==e.Donor_or_Recipient){var t=d3.formatPrefix(e.Multilateral2);if("k"==t.symbol)var a="",r=o(e.Multilateral2);else if("M"==t.symbol)var a=x,r=t.scale(e.Multilateral2).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.Multilateral2).toFixed(1);else var a="",r=o(e.Multilateral2);return g+r+a+y}});var R="Ayuda destinada",S="a Educación básica:",g="",y=" USD",C="Bilateral: ",T="Multilateral:",x=" millónes",b=" billón",M=centroids.selectAll(".bubbleTextEs").data(t.nodes.filter(function(e){return e.projection?!0:!1})).enter().append("text").attr("class","bubbleTextEs").attr("font-size","10px").attr("text-anchor","middle").attr("display","none");M.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+4}).text(function(e){if("Donor"==e.Donor_or_Recipient)return R;var t=d3.formatPrefix(e.TotalReceivedFromCountries);if("k"==t.symbol)var a="",r=o(e.TotalReceivedFromCountries);else if("M"==t.symbol)var a=x,r=t.scale(e.TotalReceivedFromCountries).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.TotalReceivedFromCountries).toFixed(1);else var a="",r=o(t.scale(e.TotalReceivedFromCountries));return C+g+r+a+y}),M.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+16}).text(function(e){return"Donor"==e.Donor_or_Recipient?S:void 0}),M.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+28}).text(function(e){if("Donor"==e.Donor_or_Recipient){var t=d3.formatPrefix(e.TotalContributedToCountries);if("k"==t.symbol)var a="",r=o(e.TotalContributedToCountries);else if("M"==t.symbol)var a=x,r=t.scale(e.TotalContributedToCountries).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.TotalContributedToCountries).toFixed(1);else var a="",r=o(t.scale(e.TotalContributedToCountries));return g+r+a+y}}),M.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+16}).text(function(e){return"Recipient"==e.Donor_or_Recipient?T:void 0}),M.append("tspan").attr("x",function(e){return e.projection[0]}).attr("y",function(e){return e.projection[1]+28}).text(function(e){if("Recipient"==e.Donor_or_Recipient){var t=d3.formatPrefix(e.Multilateral2);if("k"==t.symbol)var a="",r=o(e.Multilateral2);else if("M"==t.symbol)var a=x,r=t.scale(e.Multilateral2).toFixed(1);else if("G"==t.symbol)var a=b,r=t.scale(e.Multilateral2).toFixed(1);else var a="",r=o(e.Multilateral2);return g+r+a+y}});for(var k=Math.floor(Math.random()*t.countries.features.length),D=t.countries.features.length-1;D>=0;D--)if(D==k){var E=t.countries.features[D];break}var j=setTimeout(function(){if(n(E),divOnboarding.transition().duration(50).style("opacity",1),"en"==lang)var e='<p class="tooltip-text">Click any country to see the amount of bilateral and multilateral aid contributed or received. Mouse over an arrow to see the flow of bilateral aid between countries.</p>';else if("fr"==lang)var e="<p class=\"tooltip-text\">Cliquez sur un pays pour voir le montant d'aide à l'éducation de base versé ou reçu. Passez la souris sur une flèche pour voir le flux d'aide entre les pays.</p>";else var e='<p class="tooltip-text">Haga click en cualquier país para visualizar el monto de la ayuda aportada o recibida. Desplace el mouse sobre la flecha para mostrar el flujo de ayuda entre los países.</p>';
divOnboarding.html(e).style("left","30px").style("top","85px")},2e3);$("body").removeClass("loading"),d3.selectAll("svg").attr("class","svg-loaded"),d3.selectAll(".loading-white-space").attr("class","loaded-white-space")})}function getApiData(){$.getJSON("http://www.uis.unesco.org/das/api/countries/?code=ALL&category=EDULIT_DS&indicators=ROFST_1_CP,ROFST_2_CP,OFST_1_F_CP,OFST_1_M_CP,OFST_2_F_CP,OFST_2_M_CP&fromyear=2009&toyear=2020&mostrecent=true&fullprecision=false&callback=?",function(e){apidata=e,createFCEMap(),createOOSCRatesMap(),createEducationAidFlowMap()})}var rl_margin=.05*$(".carousel-inner").width(),margin={top:0,right:rl_margin,bottom:0,left:rl_margin},w=$(".carousel-inner").width()-margin.left-margin.right,h=.5*w-margin.top-margin.bottom,divTooltipLeft=d3.select("body").append("div").attr("class","tooltip").style("opacity",1e-6),divTooltipRight=d3.select("body").append("div").attr("class","tooltip-right").style("opacity",1e-6),divOnboarding=d3.select("#aidToEDU").append("div").attr("class","tooltip-onboard").style("opacity",1e-6),projection=d3.geo.equirectangular().scale((w+1)/2/Math.PI).translate([w/2,h/2]).precision(.1),path=d3.geo.path().projection(projection),apidata,centroids,arcs,countries,clicked,svg2=d3.select("#OOSCRatesMap").append("svg").attr("class","svg-loading").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),color_ROFST_1_CP=d3.scale.threshold();color_ROFST_1_CP.domain([9.9,19.9,29.9,100]),color_ROFST_1_CP.range(["#d0d8f7","#a2ce5b","#00a651","#262262"]);var color_ROFST_2_CP=d3.scale.threshold();color_ROFST_2_CP.domain([9.9,19.9,29.9,100]),color_ROFST_2_CP.range(["#d0d8f7","#a2ce5b","#00a651","#262262"]);var geojson,paths,activeLayer;getApiData(),$(document).ready(function(){function e(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,o,a){e[o]=a});return e}function t(e){$('*:lang("en")').addClass("hidden"),$('*:lang("fr")').addClass("hidden"),$('*:lang("es")').addClass("hidden"),$("*:lang("+e+")").removeClass("hidden"),$(".swatchText").addClass("hidden"),0==$("div.active").index()?$("#GlobalEducationGoals").find(".swatchText:lang("+e+")").removeClass("hidden"):1==$("div.active").index()?$("#OutofSchoolChildren").find(".swatchText:lang("+e+")").removeClass("hidden"):2==$("div.active").index()?$("#FlowofEducationAid").find(".swatchText:lang("+e+")").removeClass("hidden"):3==$("div.active").index()&&$("#TakeAction").find(".swatchText:lang("+e+")").removeClass("hidden"),Cookies.set("lang",e)}function o(e){if(t(e),clicked=!1,centroids.selectAll("circle").transition().duration(50).attr("display","none"),centroids.selectAll(".countryNameEn").transition().duration(50).attr("display","none"),centroids.selectAll(".countryNameFr").transition().duration(50).attr("display","none"),centroids.selectAll(".countryNameEs").transition().duration(50).attr("display","none"),centroids.selectAll(".bubbleTextEn").transition().duration(50).attr("display","none"),centroids.selectAll(".bubbleTextFr").transition().duration(50).attr("display","none"),centroids.selectAll(".bubbleTextEs").transition().duration(50).attr("display","none"),arcs.selectAll("path").transition().duration(0).attr("fill","#111").attr("fill-opacity",.75).attr("stroke-opacity",.75).attr("stroke","#111").attr("display","none"),countries.selectAll("path").transition().duration(50).style("stroke-width","1px").style("fill-opacity",1),"en"==e)var o='<p class="tooltip-text">Click any country to see the amount of bilateral and multilateral aid contributed or received. Mouse over an arrow to see the flow of bilateral aid between countries.</p>';else if("fr"==e)var o="<p class=\"tooltip-text\">Cliquez sur un pays pour voir le montant d'aide à l'éducation de base versé ou reçu. Passez la souris sur une flèche pour voir le flux d'aide entre les pays.</p>";else var o='<p class="tooltip-text">Haga click en cualquier país para visualizar el monto de la ayuda aportada o recibida. Desplace el mouse sobre la flecha para mostrar el flujo de ayuda entre los países.</p>';divOnboarding.html(o).style("left","30px").style("top","85px")}function a(e){var t="1519242675033424";if("en"==e)var o="The world has pledged 12 years of education for all, but with millions of children out of school and aid to education stalling, how far are we from the goal? Explore & share @UNESCOstat's interactive maps.";else if("fr"==e)var o="Le monde a promis 12 années de scolarité pour tous, mais avec des millions d’enfants non scolarisés et une aide à l’éducation qui stagne, sommes-nous loin de notre objectif? Explorez & partagez les cartes interactives.";else var o="El mundo se ha comprometido a brindar 12 años de educación para todos, pero con millones de niños fuera de la escuela y el estancamiento de la ayuda económica. ¿qué tan lejos estamos de la meta? Explora y comparte los mapas interactivos.";var a="http://www.uis.unesco.org/_LAYOUTS/UNESCO/education-2030/",r="https://www.facebook.com/dialog/feed?app_id="+t+"&display=popup&caption="+encodeURIComponent(o)+"&link="+encodeURIComponent(a)+"&redirect_uri="+encodeURIComponent(a);$("#shareFacebook").attr("href",r);var i="http://bit.ly/1Mu5jzr",n="UNESCOstat";if("en"==e)var l=" Is aid to #education reaching children who need it most? Explore the data:";else if("fr"==e)var l=" L'aide à l'éducation atteint-elle les enfants qui en ont le plus besoin?";else var l=" ¿Está llegando la ayuda destinada a educación a los niños que más lo necesitan?";if("en"==e)var s="pic.twitter.com/eYmY4vLpjD";else if("fr"==e)var s="pic.twitter.com/S5XL6R2h4T";else var s="pic.twitter.com/nPs1Qe3ejy";var d="https://twitter.com/share?url="+encodeURIComponent(i)+"&via="+encodeURIComponent(n)+"&text="+s+encodeURIComponent(l);$("#shareTwitter").attr("href",d);var t="1519242675033424";if("en"==e)var o="The world has pledged 12 years of education for all, but with millions of children out of school and aid to education stalling, how far are we from the goal? Explore & share @UNESCOstat's interactive maps.";else if("fr"==e)var o="Le monde a promis 12 années de scolarité pour tous, mais avec des millions d’enfants non scolarisés et une aide à l’éducation qui stagne, sommes-nous loin de notre objectif? Explorez & partagez les cartes interactives.";else var o="El mundo se ha comprometido a brindar 12 años de educación para todos, pero con millones de niños fuera de la escuela y el estancamiento de la ayuda económica. ¿Qué tan lejos estamos de la meta? Explora y comparte los mapas interactivos.";var a="http://www.uis.unesco.org/_LAYOUTS/UNESCO/education-2030/",r="https://www.facebook.com/dialog/feed?app_id="+t+"&display=popup&caption="+encodeURIComponent(o)+"&link="+encodeURIComponent(a)+"&redirect_uri="+encodeURIComponent(a);$("#takeactionFacebook1").attr("href",r);var i="http://bit.ly/1Mu5jzr",n="UNESCOstat";if("en"==e)var l=" Is aid to #education reaching children who need it most? Explore the data:";else if("fr"==e)var l=" L'aide à l'éducation atteint-elle les enfants qui en ont le plus besoin?";else var l=" ¿Está llegando la ayuda destinada a educación a los niños que más lo necesitan?";if("en"==e)var s="pic.twitter.com/eYmY4vLpjD";else if("fr"==e)var s="pic.twitter.com/S5XL6R2h4T";else var s="pic.twitter.com/nPs1Qe3ejy";var d="https://twitter.com/share?url="+encodeURIComponent(i)+"&via="+encodeURIComponent(n)+"&text="+s+encodeURIComponent(l);$("#takeactionTwitter1").attr("href",d);var t="1519242675033424";if("en"==e)var o="The world has pledged 12 years of education for all, but with millions of children out of school and aid to education stalling, how far are we from the goal? Explore & share @UNESCOstat's interactive maps.";else if("fr"==e)var o="Le monde a promis 12 années de scolarité pour tous, mais avec des millions d’enfants non scolarisés et une aide à l’éducation qui stagne, sommes-nous loin de notre objectif? Explorez & partagez les cartes interactives.";else var o="El mundo se ha comprometido a brindar 12 años de educación para todos, pero con millones de niños fuera de la escuela y el estancamiento de la ayuda económica. ¿Qué tan lejos estamos de la meta? Explora y comparte los mapas interactivos.";var a="http://www.uis.unesco.org/_LAYOUTS/UNESCO/education-2030/",r="https://www.facebook.com/dialog/feed?app_id="+t+"&display=popup&caption="+encodeURIComponent(o)+"&link="+encodeURIComponent(a)+"&redirect_uri="+encodeURIComponent(a);$("#takeactionFacebook2").attr("href",r);var i="http://bit.ly/1Mu5jzr",n="UNESCOstat";if("en"==e)var l=" Girls are the first to be excluded. #FundEducation Explore the data:";else if("fr"==e)var l=" L'aide à l'éducation atteint-elle les enfants qui en ont le plus besoin?";else var l=" ¿Está llegando la ayuda destinada a educación a los niños que más lo necesitan?";if("en"==e)var s="pic.twitter.com/DwouUX595I";else if("fr"==e)var s="pic.twitter.com/AEQ2cF3Lzz";else var s="pic.twitter.com/XibasbMLaU";var d="https://twitter.com/share?url="+encodeURIComponent(i)+"&via="+encodeURIComponent(n)+"&text="+s+encodeURIComponent(l);$("#takeactionTwitter2").attr("href",d);var t="1519242675033424";if("en"==e)var o="The world has pledged 12 years of education for all, but with millions of children out of school and aid to education stalling, how far are we from the goal? Explore & share @UNESCOstat's interactive maps.";else if("fr"==e)var o="Le monde a promis 12 années de scolarité pour tous, mais avec des millions d’enfants non scolarisés et une aide à l’éducation qui stagne, sommes-nous loin de notre objectif? Explorez & partagez les cartes interactives.";else var o="El mundo se ha comprometido a brindar 12 años de educación para todos, pero con millones de niños fuera de la escuela y el estancamiento de la ayuda económica. ¿Qué tan lejos estamos de la meta? Explora y comparte los mapas interactivos.";var a="http://www.uis.unesco.org/_LAYOUTS/UNESCO/education-2030/",r="https://www.facebook.com/dialog/feed?app_id="+t+"&display=popup&caption="+encodeURIComponent(o)+"&link="+encodeURIComponent(a)+"&redirect_uri="+encodeURIComponent(a);$("#takeactionFacebook3").attr("href",r);var i="http://bit.ly/1Mu5jzr",n="UNESCOstat";if("en"==e)var l=" Where is aid to #education going today? #FundEducation";else if("fr"==e)var l=" L'aide à l'éducation atteint-elle les enfants qui en ont le plus besoin?";else var l=" ¿Está llegando la ayuda destinada a educación a los niños que más lo necesitan?";if("en"==e)var s="pic.twitter.com/eYmY4vLpjD";else if("fr"==e)var s="pic.twitter.com/S5XL6R2h4T";else var s="pic.twitter.com/nPs1Qe3ejy";var d="https://twitter.com/share?url="+encodeURIComponent(i)+"&via="+encodeURIComponent(n)+"&text="+s+encodeURIComponent(l);$("#takeactionTwitter3").attr("href",d)}var r=Cookies.get("lang"),i=e().lang;r?lang=r:i?lang=i:lang="en",t(lang),a(lang),$(".english").click(function(){lang="en",o(lang),a(lang)}),$(".french").click(function(){lang="fr",o(lang),a(lang)}),$(".spanish").click(function(){lang="es",o(lang),a(lang)})}),$(document).ready(function(){function e(e){$(e).find(".swatch2").removeClass("hidden"),$(e).find(".swatchText:lang("+lang+")").removeClass("hidden"),$(e).find(".swatchText").css("left","70px")}function t(e){$(e).find(".swatch2").addClass("hidden"),$(e).find(".swatchText:lang("+lang+")").addClass("hidden"),$(e).find(".swatchText").css("left","50px")}$(".explore-swatch").mouseenter(function(){e(this)}),$(".explore-swatch").mouseleave(function(){$(this).hasClass("highlighted")||t(this)}),$(".explore-swatch").click(function(){$(".explore-swatch").removeClass("highlighted"),$(this).addClass("highlighted"),t(".explore-swatch"),e(this),"GlobalEducationGoals"==$(this).attr("id")?$("#carousel").carousel(0):"OutofSchoolChildren"==$(this).attr("id")?$("#carousel").carousel(1):"FlowofEducationAid"==$(this).attr("id")?$("#carousel").carousel(2):"TakeAction"==$(this).attr("id")&&$("#carousel").carousel(3)}),"GlobalEducationGoals"==Cookies.get("visSelected")?($("#carousel").carousel(0),e("#GlobalEducationGoals"),$("#GlobalEducationGoals").addClass("highlighted")):"OutofSchoolChildren"==Cookies.get("visSelected")?($("#carousel").carousel(1),e("#OutofSchoolChildren"),$("#OutofSchoolChildren").addClass("highlighted")):"FlowofEducationAid"==Cookies.get("visSelected")?($("#carousel").carousel(2),e("#FlowofEducationAid"),$("#FlowofEducationAid").addClass("highlighted")):"TakeAction"==Cookies.get("visSelected")&&($("#carousel").carousel(3),e("#TakeAction"),$("#TakeAction").addClass("highlighted")),$("#carousel").on("slid.bs.carousel",function(){t(".explore-swatch"),$(".explore-swatch").removeClass("highlighted"),0==$("div.active").index()?(e("#GlobalEducationGoals"),$("#GlobalEducationGoals").addClass("highlighted")):1==$("div.active").index()?(e("#OutofSchoolChildren"),$("#OutofSchoolChildren").addClass("highlighted")):2==$("div.active").index()?(e("#FlowofEducationAid"),$("#FlowofEducationAid").addClass("highlighted")):3==$("div.active").index()&&(e("#TakeAction"),$("#TakeAction").addClass("highlighted"))}),$(".toggle").click(function(){"css/images/OOScToggle_Primary.png"==$("#OOSCRatesMapToggleImage").attr("src")?($("#OOSCRatesMapToggleImage").attr("src","css/images/OOScToggle_LowerSecondary.png"),$(".leftToggleText").css("color","#d1d2d3"),$(".rightToggleText").css("color","#333"),$(".leftToggleTextFr").css("color","#d1d2d3"),$(".rightToggleTextFr").css("color","#333"),$(".leftToggleTextEs").css("color","#d1d2d3"),$(".rightToggleTextEs").css("color","#333"),activeLayer="ROFST_2_CP",drawOOSCMap(),$("#OOSCRatesMapLegend1").addClass("hidden"),$("#OOSCRatesMapLegend2").removeClass("hidden")):($("#OOSCRatesMapToggleImage").attr("src","css/images/OOScToggle_Primary.png"),$(".rightToggleText").css("color","#d1d2d3"),$(".leftToggleText").css("color","#333"),$(".rightToggleTextFr").css("color","#d1d2d3"),$(".leftToggleTextFr").css("color","#333"),$(".rightToggleTextEs").css("color","#d1d2d3"),$(".leftToggleTextEs").css("color","#333"),activeLayer="ROFST_1_CP",drawOOSCMap(),$("#OOSCRatesMapLegend2").addClass("hidden"),$("#OOSCRatesMapLegend1").removeClass("hidden"))})});