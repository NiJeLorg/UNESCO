var rl_margin=.05*$(".carousel-inner").width(),margin={top:0,right:rl_margin,bottom:0,left:rl_margin},w=$(".carousel-inner").width()-margin.left-margin.right,h=.5*w-margin.top-margin.bottom,divTooltipLeft=d3.select("body").append("div").attr("class","tooltip").style("opacity",1E-6),divTooltipRight=d3.select("body").append("div").attr("class","tooltip-right").style("opacity",1E-6),divOnboarding=d3.select("#aidToEDU").append("div").attr("class","tooltip-onboard").style("opacity",1E-6),projection=d3.geo.equirectangular().scale((w+
1)/2/Math.PI).translate([w/2,h/2]).precision(.1),path=d3.geo.path().projection(projection),apidata,centroids,arcs,countries,clicked;
function createFCEMap(){d3.csv("./data/FCE-data.csv",function(b){var m=d3.select("#FCEMap").append("svg").attr("class","svg-loading").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),e=d3.scale.threshold();e.domain([0,7,10,13]);e.range(["#fff","#ef4136","#f7941e","#73cfc9","#3b6a8f"]);d3.json("./data/world-countries.json",function(f){for(var k=0;k<b.length;k++)for(var d=b[k].Code,n="a"==b[k].Duration_compulsory_education&&
"m"==b[k].Duration_compulsory_education||isNaN(b[k].Duration_compulsory_education)?-99:parseFloat(b[k].Duration_compulsory_education),q="a"==b[k].Duration_free_education&&"m"==b[k].Duration_free_education||isNaN(b[k].Duration_free_education)?-99:parseFloat(b[k].Duration_free_education),g=0;g<f.features.length;g++)if(d==f.features[g].properties.adm0_a3){f.features[g].properties.Duration_compulsory_education=n;f.features[g].properties.Duration_free_education=q;break}var l=m.selectAll(".countryPaths").data(f.features);
l.enter().append("g").attr("class","countryPaths").append("path").attr("d",path).style("stroke","#4d4d4d").style("stroke-width","1px").style("fill",function(d){d=d.properties.Duration_compulsory_education;return"undefined"!==typeof d?e(d):"#fff"}).on("mouseover",function(d){l.selectAll("path").transition().duration(250).style("stroke-width",function(b){return b==d?"2px":"0px"}).style("fill-opacity",function(b){return b==d?"1":"0.5"});if(d3.event.pageX>=w/2)var b=divTooltipRight,n=-150;else b=divTooltipLeft,
n=25;b.transition().duration(250).style("opacity",1);b.html('<p class="tooltip-title">'+("en"==lang?d.properties.name_en:"fr"==lang?d.properties.name_fr:d.properties.name_sp)+'</p><p class="tooltip-text">'+("undefined"!==typeof d.properties.Duration_compulsory_education&&-99!=d.properties.Duration_compulsory_education?"en"==lang?"Compulsory education: "+d.properties.Duration_compulsory_education+" years.":"fr"==lang?"Scolarit\u00e9 obligatoire: "+d.properties.Duration_compulsory_education+" ans.":
"Educaci\u00f3n obligatoria: "+d.properties.Duration_compulsory_education+" a\u00f1os.":"en"==lang?"No data.":"fr"==lang?"Aucune donn\u00e9e.":"Sin datos.")+"</p>").style("left",d3.event.pageX+n+"px").style("top",d3.event.pageY-55+"px")}).on("mousemove",function(d){if(d3.event.pageX>=w/2){d=divTooltipRight;var b=-150}else d=divTooltipLeft,b=25;d.style("left",d3.event.pageX+b+"px").style("top",d3.event.pageY-55+"px")}).on("mouseout",function(){l.selectAll("path").transition().duration(250).style("stroke-width",
"1px").style("fill-opacity",1);divTooltipLeft.transition().duration(250).style("opacity",1E-6);divTooltipRight.transition().duration(250).style("opacity",1E-6)})})})}var svg2=d3.select("#OOSCRatesMap").append("svg").attr("class","svg-loading").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),color_ROFST_1_CP=d3.scale.threshold();color_ROFST_1_CP.domain([9.9,19.9,29.9,100]);
color_ROFST_1_CP.range(["#d0d8f7","#a2ce5b","#00a651","#262262"]);var color_ROFST_2_CP=d3.scale.threshold();color_ROFST_2_CP.domain([9.9,19.9,29.9,100]);color_ROFST_2_CP.range(["#d0d8f7","#a2ce5b","#00a651","#262262"]);var geojson,paths,activeLayer;
function createOOSCRatesMap(){d3.json("./data/world-countries.json",function(b){geojson=b;for(b=0;b<apidata.Indicators.length;b++)for(var m=apidata.Indicators[b].Country,e=parseFloat(apidata.Indicators[b].Value),f=0;f<geojson.features.length;f++)if(m==geojson.features[f].properties.adm0_a3){"ROFST_1_CP"==apidata.Indicators[b].Indicator?(geojson.features[f].properties.rate_ROFST_1_CP_Value=e,geojson.features[f].properties.rate_ROFST_1_CP_Year=apidata.Indicators[b].Year):"ROFST_2_CP"==apidata.Indicators[b].Indicator?
(geojson.features[f].properties.rate_ROFST_2_CP_Value=e,geojson.features[f].properties.rate_ROFST_2_CP_Year=apidata.Indicators[b].Year):"OFST_1_F_CP"==apidata.Indicators[b].Indicator?geojson.features[f].properties.OFST_1_F_CP_Value=e:"OFST_1_M_CP"==apidata.Indicators[b].Indicator?geojson.features[f].properties.OFST_1_M_CP_Value=e:"OFST_2_F_CP"==apidata.Indicators[b].Indicator?geojson.features[f].properties.OFST_2_F_CP_Value=e:geojson.features[f].properties.OFST_2_M_CP_Value=e;break}activeLayer="ROFST_1_CP";
drawOOSCMap()})}
function drawOOSCMap(){paths=svg2.selectAll(".countryPaths").data(geojson.features);var b=paths.enter().append("g").attr("class","countryPaths");b.append("path").attr("d",path).style("stroke","#4d4d4d").style("stroke-width","1px").on("mousemove",function(b){if(d3.event.pageX>=w/2){b=divTooltipRight;var e=-150}else b=divTooltipLeft,e=25;b.style("left",d3.event.pageX+e+"px").style("top",d3.event.pageY-55+"px")}).on("mouseout",function(){paths.selectAll("path").transition().duration(250).style("stroke-width","1px").style("fill-opacity",
1);divTooltipLeft.transition().duration(250).style("opacity",1E-6);divTooltipRight.transition().duration(250).style("opacity",1E-6)});b.call(updateOOSCMap);paths.exit().remove()}
function updateOOSCMap(){paths.select("path").style("fill",function(b){return"ROFST_1_CP"==activeLayer?(b=b.properties.rate_ROFST_1_CP_Value)?color_ROFST_1_CP(b):"#ffffff":(b=b.properties.rate_ROFST_2_CP_Value)?color_ROFST_2_CP(b):"#ffffff"}).on("mouseover",function(b){paths.selectAll("path").transition().duration(250).style("stroke-width",function(d){return d==b?"2px":"0px"}).style("fill-opacity",function(d){return d==b?"1":"0.5"});if(d3.event.pageX>=w/2)var m=divTooltipRight,e=-150;else m=divTooltipLeft,
e=25;m.transition().duration(250).style("opacity",1);if("en"==lang)var f="Male: ",k="Female: ",d="No data.",n=" thousand",q=" million";else"fr"==lang?(f="Gar\u00e7ons: ",k="Filles: ",d="Aucune donn\u00e9e.",n=" milliers",q=" millions"):(f="Hombres: ",k="Mujeres: ",d="Sin datos.",n=" miles",q=" mill\u00f3nes");if("ROFST_1_CP"==activeLayer)if(b.properties.rate_ROFST_1_CP_Value)if(b.properties.OFST_1_F_CP_Value&&b.properties.OFST_1_M_CP_Value)var g=d3.formatPrefix(b.properties.OFST_1_F_CP_Value),d=g.scale(b.properties.OFST_1_F_CP_Value).toFixed(1),
g="k"==g.symbol?n:"M"==g.symbol?q:"",k=k+d+g,g=d3.formatPrefix(b.properties.OFST_1_M_CP_Value),d=g.scale(b.properties.OFST_1_M_CP_Value).toFixed(1),n="k"==g.symbol?n:"M"==g.symbol?q:"",f=f+d+n,n=" ("+b.properties.rate_ROFST_1_CP_Year+")";else k=d,n=f="";else k=d,n=f="";else b.properties.rate_ROFST_2_CP_Value?b.properties.OFST_2_F_CP_Value&&b.properties.OFST_2_M_CP_Value?(g=d3.formatPrefix(b.properties.OFST_2_F_CP_Value),d=g.scale(b.properties.OFST_2_F_CP_Value).toFixed(1),g="k"==g.symbol?n:"M"==g.symbol?
q:"",k=k+d+g,g=d3.formatPrefix(b.properties.OFST_2_M_CP_Value),d=g.scale(b.properties.OFST_2_M_CP_Value).toFixed(1),n="k"==g.symbol?n:"M"==g.symbol?q:"",f=f+d+n,n=" ("+b.properties.rate_ROFST_2_CP_Year+")"):(k=d,n=f=""):(k=d,n=f="");m.html('<p class="tooltip-title">'+("en"==lang?b.properties.name_en:"fr"==lang?b.properties.name_fr:b.properties.name_sp)+n+'</p><p class="tooltip-text">'+k+'</p><p class="tooltip-text">'+f+"</p>").style("left",d3.event.pageX+e+"px").style("top",d3.event.pageY-55+"px")})}
function createEducationAidFlowMap(){var b;clicked=!1;var m=d3.select("#EducationAidFlowMap").append("svg").attr("class","svg-loading").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),e=d3.format(",.6"),f=d3.scale.threshold();f.domain([9.9,19.9,29.9,100]);f.range(["#bdc9e1","#67a9cf","#1c9099","#016c59"]);var k=d3.scale.threshold();k.domain([9.9,19.9,29.9,100]);k.range(["#fee5d9","#fcae91",
"#fb6a4a","#de2d26"]);m.append("rect").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom).attr("x",0).attr("y",0).style("fill","#fff").style("stroke","#fff").style("stroke-width",0).on("click",function(){clicked=!1;centroids.selectAll("circle").transition().duration(50).attr("display","none");centroids.selectAll(".countryNameEn").transition().duration(50).attr("display","none");centroids.selectAll(".countryNameFr").transition().duration(50).attr("display","none");centroids.selectAll(".countryNameEs").transition().duration(50).attr("display",
"none");centroids.selectAll(".bubbleTextEn").transition().duration(50).attr("display","none");centroids.selectAll(".bubbleTextFr").transition().duration(50).attr("display","none");centroids.selectAll(".bubbleTextEs").transition().duration(50).attr("display","none");arcs.selectAll("path").transition().duration(0).attr("fill","#111").attr("fill-opacity",.75).attr("stroke-opacity",.75).attr("stroke","#111").attr("display","none");countries.selectAll("path").transition().duration(50).style("stroke-width",
"1px").style("fill-opacity",1)});countries=m.append("g").attr("id","countries");arcs=m.append("g").attr("id","arcs");centroids=m.append("g").attr("id","centroids");d3.loadData=function(){var d=null,b={},e={},g=function(d,g){delete b[d];e[d]=g;return l()},l=function(){null!=d&&0===d3.keys(b).length&&d(e)},f={json:function(d,e){b[d]=e;d3.json(e,function(b){return g(d,b)});return f},csv:function(d,e){b[d]=e;d3.csv(e,function(b){return g(d,b)});return f},onload:function(b){d=b;l()}};return f};d3.loadData().json("countries",
"./data/world-countries.json").csv("nodes","./data/OECD_Nodes.csv").csv("flows","./data/OECD_Edges.csv").onload(function(d){function n(a){clearTimeout(B);divOnboarding.transition().duration(50).style("opacity",1E-6);divTooltipLeft.transition().duration(50).style("opacity",1E-6);divTooltipRight.transition().duration(50).style("opacity",1E-6);b=a;centroids.selectAll("circle").transition().duration(50).attr("display",function(c){return c.OECD_Country_Code==a.properties.adm0_a3?(clicked=!0,"block"):"none"});
"en"==lang?centroids.selectAll(".countryNameEn").transition().duration(50).attr("display",function(c){return c.OECD_Country_Code==a.properties.adm0_a3?"block":"none"}):"fr"==lang?centroids.selectAll(".countryNameFr").transition().duration(50).attr("display",function(c){return c.OECD_Country_Code==a.properties.adm0_a3?"block":"none"}):centroids.selectAll(".countryNameEs").transition().duration(50).attr("display",function(c){return c.OECD_Country_Code==a.properties.adm0_a3?"block":"none"});"en"==lang?
centroids.selectAll(".bubbleTextEn").transition().duration(50).attr("display",function(c){return c.OECD_Country_Code==a.properties.adm0_a3?"block":"none"}):"fr"==lang?centroids.selectAll(".bubbleTextFr").transition().duration(50).attr("display",function(c){return c.OECD_Country_Code==a.properties.adm0_a3?"block":"none"}):centroids.selectAll(".bubbleTextEs").transition().duration(50).attr("display",function(c){return c.OECD_Country_Code==a.properties.adm0_a3?"block":"none"});arcs.selectAll("path").transition().duration(0).attr("fill-opacity",
.75).attr("stroke-opacity",.75).attr("fill",function(c){return"Donor"==a.properties.Donor_or_Recipient?c.origin.OECD_Country_Code==a.properties.adm0_a3?"#44509d":"#111":c.dest.OECD_Country_Code==a.properties.adm0_a3?"#f36d42":"#111"}).attr("stroke",function(c){return"Donor"==a.properties.Donor_or_Recipient?c.origin.OECD_Country_Code==a.properties.adm0_a3?"#44509d":"#111":c.dest.OECD_Country_Code==a.properties.adm0_a3?"#f36d42":"#111"}).attr("display",function(c){return"Donor"==a.properties.Donor_or_Recipient?
c.origin.OECD_Country_Code==a.properties.adm0_a3?"block":"none":c.dest.OECD_Country_Code==a.properties.adm0_a3?"block":"none"});countries.selectAll("path").transition().duration(50).style("stroke-width",function(c){return"Donor"==a.properties.Donor_or_Recipient?0==a.properties.Donates_To.length?"1px":-1!=$.inArray(c.properties.adm0_a3,a.properties.Donates_To)?"2px":"0px":0==a.properties.Receives_From.length?"1px":-1!=$.inArray(c.properties.adm0_a3,a.properties.Receives_From)?"2px":"0px"}).style("fill-opacity",
function(c){return"Donor"==a.properties.Donor_or_Recipient?0==a.properties.Donates_To.length?"1":-1!=$.inArray(c.properties.adm0_a3,a.properties.Donates_To)?"1":"0.5":0==a.properties.Receives_From.length?"1":-1!=$.inArray(c.properties.adm0_a3,a.properties.Receives_From)?"1":"0.5"})}var q={},g=[],l=d3.max(d.flows,function(a){a.Total=a.Total.replace(/,/g,"");return parseFloat(a.Total)}),m=d3.scale.linear().domain([1,l]).range([1,20]);d.nodes.forEach(function(a){a.Multilateral2&&"a"!=a.Multilateral2?
(a.Multilateral2=a.Multilateral2.replace(/,/g,""),a.Multilateral2=parseFloat(a.Multilateral2)):a.Multilateral2=-99;var c;c=parseFloat(a.Lon);var b=parseFloat(a.Lat);c=isNaN(c)||isNaN(b)?null:[c,b];a.coords=c;a.projection=a.coords?projection(a.coords):void 0;a.TotalContributedToCountries=0;for(c=a.TotalReceivedFromCountries=0;c<d.flows.length;c++)"Donor"==a.Donor_or_Recipient?a.OECD_Country_Code==d.flows[c].ISO_Source_Code&&(b=d.flows[c].Total.replace(/,/g,""),b=parseFloat(b),isNaN(b)||(a.TotalContributedToCountries+=
b)):a.OECD_Country_Code==d.flows[c].ISO_Target_Code&&(b=d.flows[c].Total.replace(/,/g,""),b=parseFloat(b),isNaN(b)||(a.TotalReceivedFromCountries+=b));q[a.Country_Code]=a});d.flows.forEach(function(a){var c=q[a.UIS_Source_Code],d=c.coords,b=c.projection,e=q[a.UIS_Target_Code],n=e.coords,f=e.projection;a.Total=a.Total.replace(/,/g,"");a=parseFloat(a.Total);d&&n&&!isNaN(a)&&g.push({source:d,target:n,magnitude:a,origin:c,dest:e,originp:b,destp:f})});d.countries.features.forEach(function(a){for(var c=
0;c<d.nodes.length;c++)if(a.properties.adm0_a3==d.nodes[c].OECD_Country_Code){a.properties.Donor_or_Recipient=d.nodes[c].Donor_or_Recipient;a.properties.multilateral=d.nodes[c].Multilateral2;break}a.properties.Donates_To=[];a.properties.Total_Donated=0;a.properties.Receives_From=[];for(c=a.properties.Total_Received=0;c<d.flows.length;c++)"Donor"==a.properties.Donor_or_Recipient?a.properties.adm0_a3==d.flows[c].ISO_Source_Code&&(a.properties.Donates_To.push(d.flows[c].ISO_Target_Code),a.properties.Total_Donated+=
parseFloat(d.flows[c].Total)):a.properties.adm0_a3==d.flows[c].ISO_Target_Code&&(a.properties.Receives_From.push(d.flows[c].ISO_Source_Code),a.properties.Total_Received+=parseFloat(d.flows[c].Total));for(c=0;c<apidata.Indicators.length;c++){var b=apidata.Indicators[c].Country,e=parseFloat(apidata.Indicators[c].Value);b==a.properties.adm0_a3&&("ROFST_1_CP"==apidata.Indicators[c].Indicator?(a.properties.rate_ROFST_1_CP_Value=e,a.properties.rate_ROFST_1_CP_Year=apidata.Indicators[c].Year):"ROFST_2_CP"==
apidata.Indicators[c].Indicator?(a.properties.rate_ROFST_2_CP_Value=e,a.properties.rate_ROFST_2_CP_Year=apidata.Indicators[c].Year):"OFST_1_F_CP"==apidata.Indicators[c].Indicator?a.properties.OFST_1_F_CP_Value=e:"OFST_1_M_CP"==apidata.Indicators[c].Indicator?a.properties.OFST_1_M_CP_Value=e:"OFST_2_F_CP"==apidata.Indicators[c].Indicator?a.properties.OFST_2_F_CP_Value=e:a.properties.OFST_2_M_CP_Value=e)}});countries.selectAll("path").data(d.countries.features).enter().append("path").attr("d",path).style("stroke",
"#4d4d4d").style("stroke-width","1px").style("fill",function(a){return"Donor"==a.properties.Donor_or_Recipient?(a=a.properties.rate_ROFST_1_CP_Value)?f(a):"#ffffff":(a=a.properties.rate_ROFST_1_CP_Value)?k(a):"#ffffff"}).on("click",n).on("mouseover",function(a){if(!clicked){countries.selectAll("path").transition().duration(250).style("stroke-width",function(c){return c==a?"2px":"0px"}).style("fill-opacity",function(c){return c==a?"1":"0.5"});if(d3.event.pageX>=w/2)var c=divTooltipRight,d=-150;else c=
divTooltipLeft,d=25;c.transition().duration(250).style("opacity",1);if("en"==lang)var b="Aid to Education: ",n="$",g="",f="Bilateral: ",l="Multilateral: ",k=" million",m=" billion";else"fr"==lang?(b="Aid to Education: ",n="",g=" USD",f="Bilat\u00e9ral: ",l="Multilat\u00e9ral: ",k=" million",m=" milliard"):(b="Aid to Education: ",n="",g=" USD",f="Bilateral: ",l="Multilateral: ",k=" mill\u00f3n",m=" bill\u00f3n");if(0<a.properties.Total_Donated){var p=d3.formatPrefix(a.properties.Total_Donated);if("k"==
p.symbol)var q="",p=e(p.scale(a.properties.Total_Donated));else"M"==p.symbol?(q=k,p=p.scale(a.properties.Total_Donated).toFixed(1)):"G"==p.symbol?(q=m,p=p.scale(a.properties.Total_Donated).toFixed(1)):(q="",p=e(p.scale(a.properties.Total_Donated)));n=b+n+p+q+g}else p=d3.formatPrefix(a.properties.Total_Received),"k"==p.symbol?(q="",p=e(p.scale(a.properties.Total_Received))):"M"==p.symbol?(q=k,p=p.scale(a.properties.Total_Received).toFixed(1)):"G"==p.symbol?(q=m,p=p.scale(a.properties.Total_Received).toFixed(1)):
(q="",p=e(p.scale(a.properties.Total_Received))),isNaN(a.properties.multilateral)?(k="",m="0"):(b=d3.formatPrefix(a.properties.multilateral),"k"==b.symbol?(k="",m=e(a.properties.multilateral)):"M"==b.symbol?m=b.scale(a.properties.multilateral).toFixed(1):"G"==b.symbol?(k=m,m=b.scale(a.properties.multilateral).toFixed(1)):(k="",m=e(a.properties.multilateral))),n=f+n+p+q+g+"<br />"+l+n+m+k+g;c.html('<p class="tooltip-title">'+("en"==lang?a.properties.name_en:"fr"==lang?a.properties.name_fr:a.properties.name_sp)+
'</p><p class="tooltip-text">'+n+'</p><p class="tooltip-text">'+("en"==lang?"Click on this country to see the flow of education aid.":"fr"==lang?"Cliquez sur un pays pour voir le montant d'aide \u00e0 l'\u00e9ducation de base vers\u00e9 ou re\u00e7u. ":"Haga click en cualquier pa\u00eds para visualizar el monto de la ayuda aportada o recibida.")+"</p>").style("left",d3.event.pageX+d+"px").style("top",d3.event.pageY-55+"px")}}).on("mousemove",function(a){if(!clicked){if(d3.event.pageX>=w/2){a=divTooltipRight;
var c=-150}else a=divTooltipLeft,c=25;a.style("left",d3.event.pageX+c+"px").style("top",d3.event.pageY-55+"px")}}).on("mouseout",function(){clicked||(countries.selectAll("path").transition().duration(250).style("stroke-width","1px").style("fill-opacity",1),divTooltipLeft.transition().duration(250).style("opacity",1E-6),divTooltipRight.transition().duration(250).style("opacity",1E-6))});l=arcs.selectAll("path").data(g).enter().append("path").attr("display","none").attr("fill-opacity",.75).attr("stroke-opacity",
.75).attr("stroke","#111").attr("stroke-width","2px").attr("fill","#111").attr("d",function(a){var c=m(a.magnitude),b=projection(a.source);a=projection(a.target);arrowOffset=c;dx=a[0]-b[0];dy=a[1]-b[1];cx=(b[0]+a[0])/2;cy=(b[1]+a[1])/2;ra=Math.sqrt(dx*dx+dy*dy);er=ra/Math.abs(dx/h)*1.3;cx=(b[0]+a[0])/2;cy=(b[1]+a[1])/2;lineangle=Math.atan(dy/dx);erangle=Math.asin(ra/2/er);rc=ra/2*Math.tan(erangle);cpx=Math.cos(lineangle-Math.PI/2)*rc;cpy=Math.sin(lineangle-Math.PI/2)*rc;ctrx=cpx+cx;ctry=cpy+cy;trgangle=
Math.atan((ctrx-a[0])/(ctry-a[1]));angle=Math.PI/2;0>a[0]-b[0]&&(angle=-Math.PI/2,0>trgangle&&(arrowOffset=-arrowOffset));0<a[0]-b[0]&&0<trgangle&&(arrowOffset=-arrowOffset);dTrgX=a[0]+Math.sin(trgangle)*arrowOffset;dTrgY=a[1]+Math.cos(trgangle)*arrowOffset;TinX=dTrgX+Math.sin(trgangle+angle)*c;TinY=dTrgY+Math.cos(trgangle+angle)*c;ToutX=dTrgX+Math.sin(trgangle-angle)*c;ToutY=dTrgY+Math.cos(trgangle-angle)*c;curveOut="M"+TinX+","+TinY+" Q"+ctrx+","+ctry+" "+b[0]+","+b[1];curveIn=" Q"+ctrx+","+ctry+
" "+ToutX+","+ToutY;arrowHead=" L"+a[0]+","+a[1]+" "+TinX+","+TinY;return finalArrow=curveOut+curveIn+arrowHead}).sort(function(a,c){a=a.magnitude;c=c.magnitude;return isNaN(a)?isNaN(c)?0:-1:isNaN(c)?1:d3.ascending(a,c)});l.on("mouseover",function(a){arcs.selectAll("path").transition().duration(50).attr("fill-opacity",function(c){return c==a?1:.1}).attr("stroke-opacity",function(c){return c==a?1:.1}).attr("fill",function(c){return c==a?"Donor"==b.properties.Donor_or_Recipient?"#44509d":"#f36d42":
"#ccc"}).attr("stroke",function(c){return c==a?"Donor"==b.properties.Donor_or_Recipient?"#44509d":"#f36d42":"#ccc"});divOnboarding.transition().duration(50).style("opacity",1E-6);if(d3.event.pageX>=w/2)var c=divTooltipRight,d=-150;else c=divTooltipLeft,d=25;c.transition().duration(50).style("opacity",1);if("en"==lang)var n="$",g="",f=' <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> ',l=" million",k=" billion";else"fr"==lang?(n="",g=" USD",f=' <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> ',
l=" million",k=" milliard"):(n="",g=" USD",f=' <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> ',l=" mill\u00f3nes",k=" bill\u00f3n");var m=d3.formatPrefix(a.magnitude);"k"==m.symbol?(l="",m=e(m.scale(a.magnitude))):"M"==m.symbol?m=m.scale(a.magnitude).toFixed(1):"G"==m.symbol?(l=k,m=m.scale(a.magnitude).toFixed(1)):(l="",m=e(m.scale(a.magnitude)));k=d3.formatPrefix(a.dest.Multilateral2);"k"==k.symbol?e(a.dest.Multilateral2):"M"==k.symbol?k.scale(a.dest.Multilateral2).toFixed(1):
"G"==k.symbol?k.scale(a.dest.Multilateral2).toFixed(1):e(a.dest.Multilateral2);"en"==lang?(a.origin.Name_of_Country=a.origin.Name_of_Country,a.dest.Name_of_Country=a.dest.Name_of_Country):"fr"==lang?(a.origin.Name_of_Country=a.origin.Name_of_Country_fr,a.dest.Name_of_Country=a.dest.Name_of_Country_fr):(a.origin.Name_of_Country=a.origin.Name_of_Country_es,a.dest.Name_of_Country=a.dest.Name_of_Country_es);c.html('<p class="tooltip-title">'+a.dest.Name_of_Country+'</p><p class="tooltip-text">'+(a.origin.Name_of_Country+
f+a.dest.Name_of_Country+": "+n+m+l+g+".")+"</p>").style("left",d3.event.pageX+d+"px").style("top",d3.event.pageY-55+"px")});l.on("mousemove",function(a){if(d3.event.pageX>=w/2){a=divTooltipRight;var c=-150}else a=divTooltipLeft,c=25;a.style("left",d3.event.pageX+c+"px").style("top",d3.event.pageY-55+"px")});l.on("mouseout",function(a){arcs.selectAll("path").transition().duration(50).attr("fill-opacity",.75).attr("stroke-opacity",.75).attr("fill",function(){return"Donor"==b.properties.Donor_or_Recipient?
"#44509d":"#f36d42"}).attr("stroke",function(){return"Donor"==b.properties.Donor_or_Recipient?"#44509d":"#f36d42"});divTooltipLeft.transition().duration(250).style("opacity",1E-6);divTooltipRight.transition().duration(250).style("opacity",1E-6)});centroids.selectAll("circle").data(d.nodes.filter(function(a){return a.projection?!0:!1})).enter().append("circle").attr("cx",function(a){return a.projection[0]}).attr("cy",function(a){return a.projection[1]}).attr("r",68).attr("fill","#fff").attr("stroke",
"#4d4d4d").attr("stroke-width",3).attr("display","none");l=centroids.selectAll(".countryNameEn").data(d.nodes.filter(function(a){return a.projection?!0:!1})).enter().append("text").attr("class","countryNameEn").attr("font-size","12px").attr("font-weight",600).attr("text-anchor","middle").attr("display","none");l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return 17<a.Name_of_Country.length?a.projection[1]-22:a.projection[1]-10}).text(function(a){return 17<a.Name_of_Country.length?
a.Name_of_Country.split(" ",1)[0]:a.Name_of_Country});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return 17<a.Name_of_Country.length?a.projection[1]-8:a.projection[1]}).text(function(a){return 17<a.Name_of_Country.length?(a=a.Name_of_Country.split(" "),a.splice(0,1),a.join(" ")):""});l=centroids.selectAll(".countryNameFr").data(d.nodes.filter(function(a){return a.projection?!0:!1})).enter().append("text").attr("class","countryNameFr").attr("font-size","12px").attr("font-weight",
600).attr("text-anchor","middle").attr("display","none");l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return 17<a.Name_of_Country_fr.length?a.projection[1]-22:a.projection[1]-10}).text(function(a){return 17<a.Name_of_Country_fr.length?a.Name_of_Country_fr.split(" ",1)[0]:a.Name_of_Country_fr});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return 17<a.Name_of_Country_fr.length?a.projection[1]-8:a.projection[1]}).text(function(a){return 17<
a.Name_of_Country_fr.length?(a=a.Name_of_Country_fr.split(" "),a.splice(0,1),a.join(" ")):""});l=centroids.selectAll(".countryNameEs").data(d.nodes.filter(function(a){return a.projection?!0:!1})).enter().append("text").attr("class","countryNameEs").attr("font-size","12px").attr("font-weight",600).attr("text-anchor","middle").attr("display","none");l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return 17<a.Name_of_Country_es.length?a.projection[1]-22:a.projection[1]-
10}).text(function(a){return 17<a.Name_of_Country_es.length?a.Name_of_Country_es.split(" ",1)[0]:a.Name_of_Country_es});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return 17<a.Name_of_Country_fr.length?a.projection[1]-8:a.projection[1]}).text(function(a){return 17<a.Name_of_Country_es.length?(a=a.Name_of_Country_es.split(" "),a.splice(0,1),a.join(" ")):""});var A="Aid to Education: ",t="$",r="",x="Bilateral: ",y="Multilateral:",u=" million",v=" billion",l=
centroids.selectAll(".bubbleTextEn").data(d.nodes.filter(function(a){return a.projection?!0:!1})).enter().append("text").attr("class","bubbleTextEn").attr("font-size","10px").attr("text-anchor","middle").attr("display","none");l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+4}).text(function(a){if("Donor"==a.Donor_or_Recipient)return A;var c=d3.formatPrefix(a.TotalReceivedFromCountries);if("k"==c.symbol){var b="";a=e(c.scale(a.TotalReceivedFromCountries))}else"M"==
c.symbol?(b=u,a=c.scale(a.TotalReceivedFromCountries).toFixed(1)):"G"==c.symbol?(b=v,a=c.scale(a.TotalReceivedFromCountries).toFixed(1)):(b="",a=e(c.scale(a.TotalReceivedFromCountries)));return x+t+a+b+r});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+16}).text(function(a){if("Donor"==a.Donor_or_Recipient){var c=d3.formatPrefix(a.TotalContributedToCountries);if("k"==c.symbol){var b="";a=e(c.scale(a.TotalContributedToCountries))}else"M"==
c.symbol?(b=u,a=c.scale(a.TotalContributedToCountries).toFixed(1)):"G"==c.symbol?(b=v,a=c.scale(a.TotalContributedToCountries).toFixed(1)):(b="",a=e(c.scale(a.TotalContributedToCountries)));return t+a+b+r}});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+16}).text(function(a){if("Recipient"==a.Donor_or_Recipient)return y});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+28}).text(function(a){if("Recipient"==
a.Donor_or_Recipient){var c=d3.formatPrefix(a.Multilateral2);if("k"==c.symbol){var b="";a=e(a.Multilateral2)}else"M"==c.symbol?(b=u,a=c.scale(a.Multilateral2).toFixed(1)):"G"==c.symbol?(b=v,a=c.scale(a.Multilateral2).toFixed(1)):(b="",a=e(a.Multilateral2));return t+a+b+r}});A="Aide \u00e0 l\u2019\u00e9ducation de base:";t="";r=" USD";x="Bilat\u00e9ral: ";y="Multilat\u00e9ral:";u=" millions";v=" milliard";l=centroids.selectAll(".bubbleTextFr").data(d.nodes.filter(function(a){return a.projection?!0:
!1})).enter().append("text").attr("class","bubbleTextFr").attr("font-size","10px").attr("text-anchor","middle").attr("display","none");l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+4}).text(function(a){if("Donor"==a.Donor_or_Recipient)return A;var c=d3.formatPrefix(a.TotalReceivedFromCountries);if("k"==c.symbol){var b="";a=e(c.scale(a.TotalReceivedFromCountries))}else"M"==c.symbol?(b=u,a=c.scale(a.TotalReceivedFromCountries).toFixed(1)):
"G"==c.symbol?(b=v,a=c.scale(a.TotalReceivedFromCountries).toFixed(1)):(b="",a=e(c.scale(a.TotalReceivedFromCountries)));return x+t+a+b+r});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+16}).text(function(a){if("Donor"==a.Donor_or_Recipient){var c=d3.formatPrefix(a.TotalContributedToCountries);if("k"==c.symbol){var b="";a=e(c.scale(a.TotalContributedToCountries))}else"M"==c.symbol?(b=u,a=c.scale(a.TotalContributedToCountries).toFixed(1)):
"G"==c.symbol?(b=v,a=c.scale(a.TotalContributedToCountries).toFixed(1)):(b="",a=e(c.scale(a.TotalContributedToCountries)));return t+a+b+r}});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+16}).text(function(a){if("Recipient"==a.Donor_or_Recipient)return y});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+28}).text(function(a){if("Recipient"==a.Donor_or_Recipient){var c=d3.formatPrefix(a.Multilateral2);
if("k"==c.symbol){var b="";a=e(a.Multilateral2)}else"M"==c.symbol?(b=u,a=c.scale(a.Multilateral2).toFixed(1)):"G"==c.symbol?(b=v,a=c.scale(a.Multilateral2).toFixed(1)):(b="",a=e(a.Multilateral2));return t+a+b+r}});t="";r=" USD";x="Bilateral: ";y="Multilateral:";u=" mill\u00f3nes";v=" bill\u00f3n";l=centroids.selectAll(".bubbleTextEs").data(d.nodes.filter(function(a){return a.projection?!0:!1})).enter().append("text").attr("class","bubbleTextEs").attr("font-size","10px").attr("text-anchor","middle").attr("display",
"none");l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+4}).text(function(a){if("Donor"==a.Donor_or_Recipient)return"Ayuda destinada";var c=d3.formatPrefix(a.TotalReceivedFromCountries);if("k"==c.symbol){var b="";a=e(c.scale(a.TotalReceivedFromCountries))}else"M"==c.symbol?(b=u,a=c.scale(a.TotalReceivedFromCountries).toFixed(1)):"G"==c.symbol?(b=v,a=c.scale(a.TotalReceivedFromCountries).toFixed(1)):(b="",a=e(c.scale(a.TotalReceivedFromCountries)));
return x+t+a+b+r});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+16}).text(function(a){if("Donor"==a.Donor_or_Recipient)return"a Educaci\u00f3n b\u00e1sica:"});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+28}).text(function(a){if("Donor"==a.Donor_or_Recipient){var b=d3.formatPrefix(a.TotalContributedToCountries);if("k"==b.symbol){var d="";a=e(b.scale(a.TotalContributedToCountries))}else"M"==
b.symbol?(d=u,a=b.scale(a.TotalContributedToCountries).toFixed(1)):"G"==b.symbol?(d=v,a=b.scale(a.TotalContributedToCountries).toFixed(1)):(d="",a=e(b.scale(a.TotalContributedToCountries)));return t+a+d+r}});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+16}).text(function(a){if("Recipient"==a.Donor_or_Recipient)return y});l.append("tspan").attr("x",function(a){return a.projection[0]}).attr("y",function(a){return a.projection[1]+28}).text(function(a){if("Recipient"==
a.Donor_or_Recipient){var b=d3.formatPrefix(a.Multilateral2);if("k"==b.symbol){var d="";a=e(a.Multilateral2)}else"M"==b.symbol?(d=u,a=b.scale(a.Multilateral2).toFixed(1)):"G"==b.symbol?(d=v,a=b.scale(a.Multilateral2).toFixed(1)):(d="",a=e(a.Multilateral2));return t+a+d+r}});for(var l=Math.floor(Math.random()*d.countries.features.length),z=d.countries.features.length-1;0<=z;z--)if(z==l){var C=d.countries.features[z];break}var B=setTimeout(function(){n(C);divOnboarding.transition().duration(50).style("opacity",
1);divOnboarding.html("en"==lang?'<p class="tooltip-text">Click any country to see the amount of bilateral and multilateral aid contributed or received. Mouse over an arrow to see the flow of bilateral aid between countries.</p>':"fr"==lang?"<p class=\"tooltip-text\">Cliquez sur un pays pour voir le montant d'aide \u00e0 l'\u00e9ducation de base vers\u00e9 ou re\u00e7u. Passez la souris sur une fl\u00e8che pour voir le flux d'aide entre les pays.</p>":'<p class="tooltip-text">Haga click en cualquier pa\u00eds para visualizar el monto de la ayuda aportada o recibida. Desplace el mouse sobre la flecha para mostrar el flujo de ayuda entre los pa\u00edses.</p>').style("left",
"30px").style("top","85px")},2E3);$("body").removeClass("loading");d3.selectAll("svg").attr("class","svg-loaded");d3.selectAll(".loading-white-space").attr("class","loaded-white-space")})}getApiData();
function getApiData(){$.getJSON("http://www.uis.unesco.org/das/api/countries/?code=ALL&category=EDULIT_DS&indicators=ROFST_1_CP,ROFST_2_CP,OFST_1_F_CP,OFST_1_M_CP,OFST_2_F_CP,OFST_2_M_CP&fromyear=2009&toyear=2020&mostrecent=true&fullprecision=false&callback=?",function(b){apidata=b;createFCEMap();createOOSCRatesMap();createEducationAidFlowMap()})}
$(document).ready(function(){function b(b){$('*:lang("en")').addClass("hidden");$('*:lang("fr")').addClass("hidden");$('*:lang("es")').addClass("hidden");$("*:lang("+b+")").removeClass("hidden");$(".swatchText").addClass("hidden");0==$("div.active").index()?$("#GlobalEducationGoals").find(".swatchText:lang("+b+")").removeClass("hidden"):1==$("div.active").index()?$("#OutofSchoolChildren").find(".swatchText:lang("+b+")").removeClass("hidden"):2==$("div.active").index()?$("#FlowofEducationAid").find(".swatchText:lang("+
b+")").removeClass("hidden"):3==$("div.active").index()&&$("#TakeAction").find(".swatchText:lang("+b+")").removeClass("hidden");Cookies.set("lang",b)}function m(d){b(d);clicked=!1;centroids.selectAll("circle").transition().duration(50).attr("display","none");centroids.selectAll(".countryNameEn").transition().duration(50).attr("display","none");centroids.selectAll(".countryNameFr").transition().duration(50).attr("display","none");centroids.selectAll(".countryNameEs").transition().duration(50).attr("display",
"none");centroids.selectAll(".bubbleTextEn").transition().duration(50).attr("display","none");centroids.selectAll(".bubbleTextFr").transition().duration(50).attr("display","none");centroids.selectAll(".bubbleTextEs").transition().duration(50).attr("display","none");arcs.selectAll("path").transition().duration(0).attr("fill","#111").attr("fill-opacity",.75).attr("stroke-opacity",.75).attr("stroke","#111").attr("display","none");countries.selectAll("path").transition().duration(50).style("stroke-width",
"1px").style("fill-opacity",1);divOnboarding.html("en"==d?'<p class="tooltip-text">Click any country to see the amount of bilateral and multilateral aid contributed or received. Mouse over an arrow to see the flow of bilateral aid between countries.</p>':"fr"==d?"<p class=\"tooltip-text\">Cliquez sur un pays pour voir le montant d'aide \u00e0 l'\u00e9ducation de base vers\u00e9 ou re\u00e7u. Passez la souris sur une fl\u00e8che pour voir le flux d'aide entre les pays.</p>":'<p class="tooltip-text">Haga click en cualquier pa\u00eds para visualizar el monto de la ayuda aportada o recibida. Desplace el mouse sobre la flecha para mostrar el flujo de ayuda entre los pa\u00edses.</p>').style("left",
"30px").style("top","85px")}function e(b){var e="http://www.uis.unesco.org/_LAYOUTS/UNESCO/education-2030/",e="https://www.facebook.com/dialog/feed?app_id=1519242675033424&display=popup&caption="+encodeURIComponent("en"==b?"The world has pledged 12 years of education for all, but with millions of children out of school and aid to education stalling, how far are we from the goal? Explore & share @UNESCOstat's interactive maps.":"fr"==b?"Le monde a promis 12 ann\u00e9es de scolarit\u00e9 pour tous, mais avec des millions d\u2019enfants non scolaris\u00e9s et une aide \u00e0 l\u2019\u00e9ducation qui stagne, sommes-nous loin de notre objectif? Explorez & partagez les cartes interactives.":
"El mundo se ha comprometido a brindar 12 a\u00f1os de educaci\u00f3n para todos, pero con millones de ni\u00f1os fuera de la escuela y el estancamiento de la ayuda econ\u00f3mica. \u00bfqu\u00e9 tan lejos estamos de la meta? Explora y comparte los mapas interactivos.")+"&link="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(e);$("#shareFacebook").attr("href",e);var e="UNESCOstat",f="en"==b?" Is aid to #education reaching children who need it most? Explore the data:":"fr"==b?" L'aide \u00e0 l'\u00e9ducation atteint-elle les enfants qui en ont le plus besoin?":
" \u00bfEst\u00e1 llegando la ayuda destinada a educaci\u00f3n a los ni\u00f1os que m\u00e1s lo necesitan?",g="en"==b?"pic.twitter.com/eYmY4vLpjD":"fr"==b?"pic.twitter.com/S5XL6R2h4T":"pic.twitter.com/nPs1Qe3ejy",e="https://twitter.com/share?url="+encodeURIComponent("http://bit.ly/1Mu5jzr")+"&via="+encodeURIComponent(e)+"&text="+g+encodeURIComponent(f);$("#shareTwitter").attr("href",e);e="http://www.uis.unesco.org/_LAYOUTS/UNESCO/education-2030/";e="https://www.facebook.com/dialog/feed?app_id=1519242675033424&display=popup&caption="+
encodeURIComponent("en"==b?"The world has pledged 12 years of education for all, but with millions of children out of school and aid to education stalling, how far are we from the goal? Explore & share @UNESCOstat's interactive maps.":"fr"==b?"Le monde a promis 12 ann\u00e9es de scolarit\u00e9 pour tous, mais avec des millions d\u2019enfants non scolaris\u00e9s et une aide \u00e0 l\u2019\u00e9ducation qui stagne, sommes-nous loin de notre objectif? Explorez & partagez les cartes interactives.":"El mundo se ha comprometido a brindar 12 a\u00f1os de educaci\u00f3n para todos, pero con millones de ni\u00f1os fuera de la escuela y el estancamiento de la ayuda econ\u00f3mica. \u00bfQu\u00e9 tan lejos estamos de la meta? Explora y comparte los mapas interactivos.")+
"&link="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(e);$("#takeactionFacebook1").attr("href",e);e="UNESCOstat";f="en"==b?" Is aid to #education reaching children who need it most? Explore the data:":"fr"==b?" L'aide \u00e0 l'\u00e9ducation atteint-elle les enfants qui en ont le plus besoin?":" \u00bfEst\u00e1 llegando la ayuda destinada a educaci\u00f3n a los ni\u00f1os que m\u00e1s lo necesitan?";g="en"==b?"pic.twitter.com/eYmY4vLpjD":"fr"==b?"pic.twitter.com/S5XL6R2h4T":"pic.twitter.com/nPs1Qe3ejy";
e="https://twitter.com/share?url="+encodeURIComponent("http://bit.ly/1Mu5jzr")+"&via="+encodeURIComponent(e)+"&text="+g+encodeURIComponent(f);$("#takeactionTwitter1").attr("href",e);e="http://www.uis.unesco.org/_LAYOUTS/UNESCO/education-2030/";e="https://www.facebook.com/dialog/feed?app_id=1519242675033424&display=popup&caption="+encodeURIComponent("en"==b?"The world has pledged 12 years of education for all, but with millions of children out of school and aid to education stalling, how far are we from the goal? Explore & share @UNESCOstat's interactive maps.":
"fr"==b?"Le monde a promis 12 ann\u00e9es de scolarit\u00e9 pour tous, mais avec des millions d\u2019enfants non scolaris\u00e9s et une aide \u00e0 l\u2019\u00e9ducation qui stagne, sommes-nous loin de notre objectif? Explorez & partagez les cartes interactives.":"El mundo se ha comprometido a brindar 12 a\u00f1os de educaci\u00f3n para todos, pero con millones de ni\u00f1os fuera de la escuela y el estancamiento de la ayuda econ\u00f3mica. \u00bfQu\u00e9 tan lejos estamos de la meta? Explora y comparte los mapas interactivos.")+
"&link="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(e);$("#takeactionFacebook2").attr("href",e);e="UNESCOstat";f="en"==b?" Girls are the first to be excluded. #FundEducation Explore the data:":"fr"==b?" L'aide \u00e0 l'\u00e9ducation atteint-elle les enfants qui en ont le plus besoin?":" \u00bfEst\u00e1 llegando la ayuda destinada a educaci\u00f3n a los ni\u00f1os que m\u00e1s lo necesitan?";g="en"==b?"pic.twitter.com/DwouUX595I":"fr"==b?"pic.twitter.com/AEQ2cF3Lzz":"pic.twitter.com/XibasbMLaU";
e="https://twitter.com/share?url="+encodeURIComponent("http://bit.ly/1Mu5jzr")+"&via="+encodeURIComponent(e)+"&text="+g+encodeURIComponent(f);$("#takeactionTwitter2").attr("href",e);e="http://www.uis.unesco.org/_LAYOUTS/UNESCO/education-2030/";e="https://www.facebook.com/dialog/feed?app_id=1519242675033424&display=popup&caption="+encodeURIComponent("en"==b?"The world has pledged 12 years of education for all, but with millions of children out of school and aid to education stalling, how far are we from the goal? Explore & share @UNESCOstat's interactive maps.":
"fr"==b?"Le monde a promis 12 ann\u00e9es de scolarit\u00e9 pour tous, mais avec des millions d\u2019enfants non scolaris\u00e9s et une aide \u00e0 l\u2019\u00e9ducation qui stagne, sommes-nous loin de notre objectif? Explorez & partagez les cartes interactives.":"El mundo se ha comprometido a brindar 12 a\u00f1os de educaci\u00f3n para todos, pero con millones de ni\u00f1os fuera de la escuela y el estancamiento de la ayuda econ\u00f3mica. \u00bfQu\u00e9 tan lejos estamos de la meta? Explora y comparte los mapas interactivos.")+
"&link="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(e);$("#takeactionFacebook3").attr("href",e);e="UNESCOstat";f="en"==b?" Where is aid to #education going today? #FundEducation":"fr"==b?" L'aide \u00e0 l'\u00e9ducation atteint-elle les enfants qui en ont le plus besoin?":" \u00bfEst\u00e1 llegando la ayuda destinada a educaci\u00f3n a los ni\u00f1os que m\u00e1s lo necesitan?";g="en"==b?"pic.twitter.com/eYmY4vLpjD":"fr"==b?"pic.twitter.com/S5XL6R2h4T":"pic.twitter.com/nPs1Qe3ejy";
e="https://twitter.com/share?url="+encodeURIComponent("http://bit.ly/1Mu5jzr")+"&via="+encodeURIComponent(e)+"&text="+g+encodeURIComponent(f);$("#takeactionTwitter3").attr("href",e)}var f=Cookies.get("lang"),k=function(){var b={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,f,g){b[f]=g});return b}().lang;lang=f?f:k?k:"en";b(lang);e(lang);$(".english").click(function(){lang="en";m(lang);e(lang)});$(".french").click(function(){lang="fr";m(lang);e(lang)});$(".spanish").click(function(){lang=
"es";m(lang);e(lang)})});
$(document).ready(function(){function b(b){$(b).find(".swatch2").removeClass("hidden");$(b).find(".swatchText:lang("+lang+")").removeClass("hidden");$(b).find(".swatchText").css("left","70px")}function m(b){$(b).find(".swatch2").addClass("hidden");$(b).find(".swatchText:lang("+lang+")").addClass("hidden");$(b).find(".swatchText").css("left","50px")}$(".explore-swatch").mouseenter(function(){b(this)});$(".explore-swatch").mouseleave(function(){$(this).hasClass("highlighted")||m(this)});$(".explore-swatch").click(function(){$(".explore-swatch").removeClass("highlighted");
$(this).addClass("highlighted");m(".explore-swatch");b(this);"GlobalEducationGoals"==$(this).attr("id")?$("#carousel").carousel(0):"OutofSchoolChildren"==$(this).attr("id")?$("#carousel").carousel(1):"FlowofEducationAid"==$(this).attr("id")?$("#carousel").carousel(2):"TakeAction"==$(this).attr("id")&&$("#carousel").carousel(3)});"GlobalEducationGoals"==Cookies.get("visSelected")?($("#carousel").carousel(0),b("#GlobalEducationGoals"),$("#GlobalEducationGoals").addClass("highlighted")):"OutofSchoolChildren"==
Cookies.get("visSelected")?($("#carousel").carousel(1),b("#OutofSchoolChildren"),$("#OutofSchoolChildren").addClass("highlighted")):"FlowofEducationAid"==Cookies.get("visSelected")?($("#carousel").carousel(2),b("#FlowofEducationAid"),$("#FlowofEducationAid").addClass("highlighted")):"TakeAction"==Cookies.get("visSelected")&&($("#carousel").carousel(3),b("#TakeAction"),$("#TakeAction").addClass("highlighted"));$("#carousel").on("slid.bs.carousel",function(){m(".explore-swatch");$(".explore-swatch").removeClass("highlighted");
0==$("div.active").index()?(b("#GlobalEducationGoals"),$("#GlobalEducationGoals").addClass("highlighted")):1==$("div.active").index()?(b("#OutofSchoolChildren"),$("#OutofSchoolChildren").addClass("highlighted")):2==$("div.active").index()?(b("#FlowofEducationAid"),$("#FlowofEducationAid").addClass("highlighted")):3==$("div.active").index()&&(b("#TakeAction"),$("#TakeAction").addClass("highlighted"))});$(".toggle").click(function(){"css/images/OOScToggle_Primary.png"==$("#OOSCRatesMapToggleImage").attr("src")?
($("#OOSCRatesMapToggleImage").attr("src","css/images/OOScToggle_LowerSecondary.png"),$(".leftToggleText").css("color","#d1d2d3"),$(".rightToggleText").css("color","#333"),$(".leftToggleTextFr").css("color","#d1d2d3"),$(".rightToggleTextFr").css("color","#333"),$(".leftToggleTextEs").css("color","#d1d2d3"),$(".rightToggleTextEs").css("color","#333"),activeLayer="ROFST_2_CP",drawOOSCMap(),$("#OOSCRatesMapLegend1").addClass("hidden"),$("#OOSCRatesMapLegend2").removeClass("hidden")):($("#OOSCRatesMapToggleImage").attr("src",
"css/images/OOScToggle_Primary.png"),$(".rightToggleText").css("color","#d1d2d3"),$(".leftToggleText").css("color","#333"),$(".rightToggleTextFr").css("color","#d1d2d3"),$(".leftToggleTextFr").css("color","#333"),$(".rightToggleTextEs").css("color","#d1d2d3"),$(".leftToggleTextEs").css("color","#333"),activeLayer="ROFST_1_CP",drawOOSCMap(),$("#OOSCRatesMapLegend2").addClass("hidden"),$("#OOSCRatesMapLegend1").removeClass("hidden"))})});